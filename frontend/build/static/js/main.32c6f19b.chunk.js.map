{"version":3,"sources":["services/api.js","contexts/AuthContext.js","pages/Login.js","pages/Register.js","pages/Dashboard.js","components/ShareModal.js","pages/Files.js","utils/format.js","pages/Shares.js","pages/ShareView.js","pages/Profile.js","components/Sidebar.js","components/Header.js","App.js","index.js"],"names":["api","axios","create","baseURL","process","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","href","AuthContext","createContext","useAuth","context","useContext","Error","AuthProvider","_ref","children","user","setUser","useState","loading","setLoading","useEffect","defaults","common","fetchUser","async","get","data","console","value","login","post","credentials","setItem","message","success","_error$response$data","errorMessage","register","userData","_error$response2","errorData","non_field_errors","username","email","logout","updateProfile","put","_error$response3","_error$response3$data","_jsx","Provider","Title","Text","Typography","Login","apiStatus","setApiStatus","checking","online","navigate","useNavigate","timeout","warn","checkApiStatus","_jsxs","style","minHeight","display","justifyContent","alignItems","padding","background","fontFamily","position","top","left","transform","zIndex","width","maxWidth","Alert","description","type","showIcon","closable","action","Button","size","onClick","handleRetryApi","setTimeout","borderRadius","Card","border","boxShadow","bodyStyle","textAlign","marginBottom","height","color","fontSize","margin","CloudOutlined","level","fontWeight","Form","name","onFinish","values","layout","marginTop","Item","rules","required","Input","prefix","UserOutlined","placeholder","Password","LockOutlined","htmlType","disabled","block","backgroundColor","borderColor","borderTop","paddingTop","Link","to","textDecoration","Register","className","backdropFilter","result","MailOutlined","min","dependencies","getFieldValue","validator","_","resolve","Dashboard","storageInfo","useQuery","then","res","formatBytes","bytes","i","Math","floor","log","parseFloat","pow","toFixed","Row","gutter","Col","xs","sm","lg","Statistic","title","storage_quota","formatter","used_storage","FileOutlined","total_files","total_folders","FolderOutlined","Space","direction","strong","Progress","percent","storage_usage_percentage","strokeColor","format","available_storage","cursor","transition","onMouseEnter","e","currentTarget","onMouseLeave","ShareAltOutlined","ShareModal","visible","onCancel","file","onSuccess","form","useForm","shareLink","setShareLink","shareCreated","setShareCreated","handleCancel","resetFields","Modal","open","footer","wordBreak","copyable","text","icon","CopyOutlined","handleCopyLink","navigator","clipboard","writeText","_Fragment","shareData","password","undefined","expire_at","toISOString","max_downloads","id","fullShareLink","origin","share_code","label","help","Divider","ClockCircleOutlined","DatePicker","showTime","disabledDate","current","dayjs","startOf","NumberOutlined","InputNumber","Dragger","Upload","Files","folderId","useParams","queryClient","useQueryClient","uploadModalVisible","setUploadModalVisible","folderModalVisible","setFolderModalVisible","folderForm","folders","params","parent_id","filesData","isLoading","folder_id","refetchOnWindowFocus","uploadMutation","useMutation","fileObj","FormData","append","invalidateQueries","onError","errorMsg","createFolderMutation","_objectSpread","_error$response2$data","deleteFileMutation","fileId","delete","deleteFolderMutation","_error$response5","_error$response5$data","uploadProps","multiple","customRequest","mutate","showUploadList","folderColumns","dataIndex","key","render","record","Date","toLocaleString","Popconfirm","onConfirm","okText","cancelText","danger","DeleteOutlined","fileColumns","getFileIconColor","file_extension","Tooltip","original_name","ellipsis","Tag","CloudDownloadOutlined","download_url","filename","method","destroy","downloadResponse","responseType","blob","Blob","mime_type","url","URL","createObjectURL","link","document","createElement","download","body","appendChild","click","removeChild","revokeObjectURL","streamError","_error$response4","_error$response4$data","downloadFile","handleShareFile","extension","shareModalVisible","setShareModalVisible","selectedFileId","setSelectedFileId","ArrowLeftOutlined","UploadOutlined","FolderAddOutlined","span","Table","columns","dataSource","rowKey","pagination","results","total","count","pageSize","showSizeChanger","showQuickJumper","onOk","submit","confirmLoading","handleShareModalCancel","RangePicker","Shares","createModalVisible","setCreateModalVisible","shareForm","shares","createShareMutation","deleteShareMutation","shareId","code","isActive","is_expired","time","EyeOutlined","PlusOutlined","info","ShareView","shareCode","downloading","setDownloading","shareInfo","setShareInfo","setPassword","passwordRequired","setPasswordRequired","setError","fetchShareInfo","pwd","arguments","length","handlePasswordSubmit","trim","formatDate","dateString","Spin","tip","onChange","target","onPressEnter","file_name","Descriptions","column","bordered","formatFileSize","file_size","download_count","password_protected","created_at","DownloadOutlined","contentDisposition","filenameMatch","match","replace","Profile","React","setFieldsValue","first_name","last_name","beforeUpload","includes","formData","reload","handleAvatarUpload","Avatar","src","avatar","date_joined","toLocaleDateString","SaveOutlined","storage_quota_display","used_storage_display","available_storage_display","Sider","Layout","Sidebar","useLocation","menuItems","DashboardOutlined","borderRight","borderBottom","Menu","mode","selectedKeys","getSelectedKey","path","pathname","startsWith","items","Header","AntHeader","SettingOutlined","LogoutOutlined","marginRight","Dropdown","menu","placement","Content","App","Routes","Route","element","Navigate","locale","QueryClient","ReactDOM","createRoot","getElementById","StrictMode","QueryClientProvider","client","ConfigProvider","zhCN","BrowserRouter"],"mappings":"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","file":"static/js/main.32c6f19b.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// 请求拦截器\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Token ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napi.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;","import React, { createContext, useContext, useEffect, useState } from 'react';\nimport { message } from 'antd';\nimport api from '../services/api';\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      api.defaults.headers.common['Authorization'] = `Token ${token}`;\n      fetchUser();\n    } else {\n      setLoading(false);\n    }\n  }, []);\n\n  const fetchUser = async () => {\n    try {\n      const response = await api.get('/api/auth/profile/');\n      setUser(response.data);\n    } catch (error) {\n      console.error('Failed to fetch user:', error);\n      localStorage.removeItem('token');\n      delete api.defaults.headers.common['Authorization'];\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const login = async (credentials) => {\n    try {\n      const response = await api.post('/api/auth/login/', credentials);\n      const { token, user } = response.data;\n      \n      localStorage.setItem('token', token);\n      api.defaults.headers.common['Authorization'] = `Token ${token}`;\n      setUser(user);\n      \n      message.success('登录成功！');\n      return { success: true };\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || '登录失败';\n      message.error(errorMessage);\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const register = async (userData) => {\n    try {\n      const response = await api.post('/api/auth/register/', userData);\n      const { token, user } = response.data;\n      \n      localStorage.setItem('token', token);\n      api.defaults.headers.common['Authorization'] = `Token ${token}`;\n      setUser(user);\n      \n      message.success('注册成功！');\n      return { success: true };\n    } catch (error) {\n      const errorData = error.response?.data;\n      let errorMessage = '注册失败';\n      \n      if (errorData) {\n        if (typeof errorData === 'string') {\n          errorMessage = errorData;\n        } else if (errorData.non_field_errors) {\n          errorMessage = errorData.non_field_errors[0];\n        } else if (errorData.username) {\n          errorMessage = errorData.username[0];\n        } else if (errorData.email) {\n          errorMessage = errorData.email[0];\n        }\n      }\n      \n      message.error(errorMessage);\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await api.post('/api/auth/logout/');\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('token');\n      delete api.defaults.headers.common['Authorization'];\n      setUser(null);\n      message.success('已退出登录');\n    }\n  };\n\n  const updateProfile = async (userData) => {\n    try {\n      const response = await api.put('/api/auth/profile/', userData);\n      setUser(response.data);\n      message.success('资料更新成功！');\n      return { success: true };\n    } catch (error) {\n      const errorMessage = error.response?.data?.error || '更新失败';\n      message.error(errorMessage);\n      return { success: false, error: errorMessage };\n    }\n  };\n\n  const value = {\n    user,\n    login,\n    register,\n    logout,\n    updateProfile,\n    loading\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};","import React, { useState, useEffect } from 'react';\nimport { Form, Input, Button, Card, Typography, message, Alert, Spin } from 'antd';\nimport { UserOutlined, LockOutlined, CloudOutlined, ReloadOutlined } from '@ant-design/icons';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../services/api';\n\nconst { Title, Text } = Typography;\n\nconst Login = () => {\n  const [loading, setLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState({ checking: true, online: false });\n  const { login } = useAuth();\n  const navigate = useNavigate();\n\n  // 检查API连接状态\n  useEffect(() => {\n    const checkApiStatus = async () => {\n      try {\n        const response = await api.get('/api/auth/', { timeout: 5000 });\n        setApiStatus({ checking: false, online: true });\n      } catch (error) {\n        setApiStatus({ checking: false, online: false });\n        console.warn('API连接检查失败:', error.message);\n      }\n    };\n\n    checkApiStatus();\n  }, []);\n\n  const onFinish = async (values) => {\n    setLoading(true);\n    try {\n      const result = await login(values);\n      if (result.success) {\n        message.success('登录成功！正在跳转...');\n        setTimeout(() => navigate('/dashboard'), 1000);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRetryApi = () => {\n    setApiStatus({ checking: true, online: false });\n    setTimeout(() => {\n      checkApiStatus();\n    }, 1000);\n  };\n\n  const checkApiStatus = async () => {\n    try {\n      await api.get('/api/auth/', { timeout: 5000 });\n      setApiStatus({ checking: false, online: true });\n    } catch (error) {\n      setApiStatus({ checking: false, online: false });\n    }\n  };\n\n  return (\n    <div style={{\n      minHeight: '100vh',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: '20px',\n      background: '#f0f2f5',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif'\n    }}>\n      {/* API状态提示 */}\n      {!apiStatus.checking && !apiStatus.online && (\n        <div style={{\n          position: 'absolute',\n          top: '20px',\n          left: '50%',\n          transform: 'translateX(-50%)',\n          zIndex: 1000,\n          width: '90%',\n          maxWidth: '400px'\n        }}>\n          <Alert\n            message=\"服务连接失败\"\n            description=\"无法连接到服务器，请检查网络连接或稍后重试。\"\n            type=\"error\"\n            showIcon\n            closable={false}\n            action={\n              <Button size=\"small\" onClick={handleRetryApi}>\n                重试\n              </Button>\n            }\n            style={{ borderRadius: '8px' }}\n          />\n        </div>\n      )}\n\n      <Card\n        style={{\n          width: '100%',\n          maxWidth: '360px',\n          padding: '40px 32px',\n          border: '1px solid #d9d9d9',\n          borderRadius: '8px',\n          boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)'\n        }}\n        bodyStyle={{ padding: 0 }}\n      >\n        <div style={{ textAlign: 'center', marginBottom: '32px' }}>\n          <div style={{\n            width: '64px',\n            height: '64px',\n            background: '#1890ff',\n            borderRadius: '50%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            color: 'white',\n            fontSize: '28px',\n            margin: '0 auto 20px'\n          }}>\n            <CloudOutlined />\n          </div>\n          <Title level={3} style={{ \n            color: '#262626', \n            margin: '0 0 8px 0',\n            fontSize: '24px',\n            fontWeight: 600\n          }}>\n            登录\n          </Title>\n          <Text style={{ \n            color: '#8c8c8c',\n            fontSize: '14px'\n          }}>\n            欢迎使用云存储系统\n          </Text>\n        </div>\n\n          <Form\n            name=\"login\"\n            onFinish={onFinish}\n            layout=\"vertical\"\n            size=\"large\"\n            style={{ marginTop: '24px' }}\n          >\n            <Form.Item\n              name=\"username\"\n              rules={[{ required: true, message: '请输入用户名' }]}\n              style={{ marginBottom: '16px' }}\n            >\n              <Input\n                prefix={<UserOutlined style={{ color: '#8c8c8c' }} />}\n                placeholder=\"用户名\"\n                style={{\n                  height: '40px',\n                  border: '1px solid #d9d9d9',\n                  borderRadius: '6px'\n                }}\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"password\"\n              rules={[{ required: true, message: '请输入密码' }]}\n              style={{ marginBottom: '24px' }}\n            >\n              <Input.Password\n                prefix={<LockOutlined style={{ color: '#8c8c8c' }} />}\n                placeholder=\"密码\"\n                style={{\n                  height: '40px',\n                  border: '1px solid #d9d9d9',\n                  borderRadius: '6px'\n                }}\n              />\n            </Form.Item>\n\n            <Form.Item style={{ marginBottom: '16px' }}>\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                loading={loading}\n                disabled={!apiStatus.online && !apiStatus.checking}\n                block\n                style={{\n                  height: '40px',\n                  fontSize: '16px',\n                  fontWeight: 500,\n                  backgroundColor: '#1890ff',\n                  borderColor: '#1890ff',\n                  borderRadius: '6px'\n                }}\n              >\n                {loading ? '登录中...' : '登录'}\n              </Button>\n            </Form.Item>\n          </Form>\n\n          <div style={{ \n            textAlign: 'center',\n            borderTop: '1px solid #f0f0f0',\n            paddingTop: '16px',\n            marginTop: '16px'\n          }}>\n            <Text style={{ color: '#8c8c8c', fontSize: '14px' }}>\n              还没有账号？{' '}\n              <Link \n                to=\"/register\" \n                style={{ \n                  color: '#1890ff',\n                  textDecoration: 'none',\n                  fontWeight: 500\n                }}\n              >\n                立即注册\n              </Link>\n            </Text>\n          </div>\n        </Card>\n    </div>\n  );\n};\n\nexport default Login;","import React, { useState } from 'react';\nimport { Form, Input, Button, Card, Typography } from 'antd';\nimport { UserOutlined, LockOutlined, MailOutlined, CloudOutlined } from '@ant-design/icons';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst { Title, Text } = Typography;\n\nconst Register = () => {\n  const [loading, setLoading] = useState(false);\n  const { register } = useAuth();\n  const navigate = useNavigate();\n\n  const onFinish = async (values) => {\n    setLoading(true);\n    const result = await register(values);\n    setLoading(false);\n    \n    if (result.success) {\n      navigate('/dashboard');\n    }\n  };\n\n  return (\n    <div className=\"cel-gradient-bg\" style={{\n      minHeight: '100vh',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: '20px'\n    }}>\n      <div className=\"cel-float\">\n        <Card\n          style={{\n            width: '100%',\n            maxWidth: '400px',\n            padding: '20px',\n            background: 'rgba(255, 255, 255, 0.95)',\n            backdropFilter: 'blur(10px)',\n            border: '1px solid rgba(255, 255, 255, 0.2)',\n            borderRadius: '20px'\n          }}\n        >\n          <div style={{ textAlign: 'center', marginBottom: '32px' }}>\n            <div style={{\n              width: '80px',\n              height: '80px',\n              background: 'linear-gradient(145deg, #667eea, #764ba2)',\n              borderRadius: '20px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              color: 'white',\n              fontSize: '36px',\n              fontWeight: 'bold',\n              margin: '0 auto 16px'\n            }}>\n              <CloudOutlined />\n            </div>\n            <Title level={2} style={{ color: '#333', margin: 0 }}>\n              创建账号\n            </Title>\n            <Text type=\"secondary\">\n              开始您的云存储之旅\n            </Text>\n          </div>\n\n          <Form\n            name=\"register\"\n            onFinish={onFinish}\n            layout=\"vertical\"\n            size=\"large\"\n          >\n            <Form.Item\n              name=\"username\"\n              rules={[{ required: true, message: '请输入用户名' }]}\n            >\n              <Input\n                prefix={<UserOutlined />}\n                placeholder=\"用户名\"\n                className=\"cel-input\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"email\"\n              rules={[\n                { required: true, message: '请输入邮箱' },\n                { type: 'email', message: '请输入有效的邮箱地址' }\n              ]}\n            >\n              <Input\n                prefix={<MailOutlined />}\n                placeholder=\"邮箱\"\n                className=\"cel-input\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"password\"\n              rules={[\n                { required: true, message: '请输入密码' },\n                { min: 8, message: '密码至少8个字符' }\n              ]}\n            >\n              <Input.Password\n                prefix={<LockOutlined />}\n                placeholder=\"密码\"\n                className=\"cel-input\"\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"password_confirm\"\n              dependencies={['password']}\n              rules={[\n                { required: true, message: '请确认密码' },\n                ({ getFieldValue }) => ({\n                  validator(_, value) {\n                    if (!value || getFieldValue('password') === value) {\n                      return Promise.resolve();\n                    }\n                    return Promise.reject(new Error('两次输入的密码不一致'));\n                  },\n                }),\n              ]}\n            >\n              <Input.Password\n                prefix={<LockOutlined />}\n                placeholder=\"确认密码\"\n                className=\"cel-input\"\n              />\n            </Form.Item>\n\n            <Form.Item>\n              <Button\n                type=\"primary\"\n                htmlType=\"submit\"\n                loading={loading}\n                block\n                className=\"cel-button\"\n                style={{\n                  height: '48px',\n                  fontSize: '16px',\n                  fontWeight: 'bold'\n                }}\n              >\n                注册\n              </Button>\n            </Form.Item>\n\n            <div style={{ textAlign: 'center' }}>\n              <Text type=\"secondary\">\n                已有账号？{' '}\n                <Link to=\"/login\" style={{ color: '#667eea', fontWeight: 'bold' }}>\n                  立即登录\n                </Link>\n              </Text>\n            </div>\n          </Form>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default Register;","import React from 'react';\nimport { Row, Col, Card, Statistic, Progress, Typography, Space } from 'antd';\nimport { \n  CloudOutlined, \n  FolderOutlined, \n  FileOutlined, \n  ShareAltOutlined \n} from '@ant-design/icons';\nimport { useQuery } from 'react-query';\nimport api from '../services/api';\n\nconst { Title, Text } = Typography;\n\nconst Dashboard = () => {\n  const { data: storageInfo } = useQuery('storage-info', () =>\n    api.get('/api/files/storage/').then(res => res.data)\n  );\n\n  const formatBytes = (bytes) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  return (\n    <div>\n      <Title level={2} style={{ color: '#333', marginBottom: '24px' }}>\n        仪表盘\n      </Title>\n\n      <Row gutter={[24, 24]}>\n        <Col xs={24} sm={12} lg={6}>\n          <Card className=\"modern-card\">\n            <Statistic\n              title=\"存储配额\"\n              value={storageInfo?.storage_quota || 0}\n              formatter={(value) => formatBytes(value)}\n              prefix={<CloudOutlined style={{ color: '#1890ff' }} />}\n            />\n          </Card>\n        </Col>\n\n        <Col xs={24} sm={12} lg={6}>\n          <Card className=\"modern-card\">\n            <Statistic\n              title=\"已使用存储\"\n              value={storageInfo?.used_storage || 0}\n              formatter={(value) => formatBytes(value)}\n              prefix={<FileOutlined style={{ color: '#52c41a' }} />}\n            />\n          </Card>\n        </Col>\n\n        <Col xs={24} sm={12} lg={6}>\n          <Card className=\"modern-card\">\n            <Statistic\n              title=\"文件总数\"\n              value={storageInfo?.total_files || 0}\n              prefix={<FileOutlined style={{ color: '#722ed1' }} />}\n            />\n          </Card>\n        </Col>\n\n        <Col xs={24} sm={12} lg={6}>\n          <Card className=\"modern-card\">\n            <Statistic\n              title=\"文件夹总数\"\n              value={storageInfo?.total_folders || 0}\n              prefix={<FolderOutlined style={{ color: '#fa8c16' }} />}\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      <Row gutter={[24, 24]} style={{ marginTop: '24px' }}>\n        <Col xs={24} lg={12}>\n          <Card className=\"modern-card\" title=\"存储使用情况\">\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\n              <div>\n                <Text strong>总体使用率</Text>\n                <Progress\n                  percent={storageInfo?.storage_usage_percentage || 0}\n                  strokeColor={{\n                    '0%': '#1890ff',\n                    '100%': '#52c41a',\n                  }}\n                  format={(percent) => `${percent?.toFixed(1)}%`}\n                  className=\"progress-custom\"\n                />\n              </div>\n              <div>\n                <Text type=\"secondary\">\n                  已使用: {formatBytes(storageInfo?.used_storage || 0)} / \n                  {formatBytes(storageInfo?.storage_quota || 0)}\n                </Text>\n              </div>\n              <div>\n                <Text type=\"secondary\">\n                  可用空间: {formatBytes(storageInfo?.available_storage || 0)}\n                </Text>\n              </div>\n            </Space>\n          </Card>\n        </Col>\n\n        <Col xs={24} lg={12}>\n          <Card className=\"modern-card\" title=\"快速操作\">\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\n              <div style={{\n                padding: '16px',\n                background: '#f6ffed',\n                border: '1px solid #b7eb8f',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                transition: 'all 0.2s ease'\n              }}\n              onClick={() => window.location.href = '/files'}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.backgroundColor = '#d9f7be';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.backgroundColor = '#f6ffed';\n              }}\n              >\n                <Space>\n                  <FolderOutlined style={{ fontSize: '20px', color: '#52c41a' }} />\n                  <div>\n                    <Text strong>管理文件</Text>\n                    <br />\n                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>浏览和管理您的文件</Text>\n                  </div>\n                </Space>\n              </div>\n\n              <div style={{\n                padding: '16px',\n                background: '#e6f7ff',\n                border: '1px solid #91d5ff',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                transition: 'all 0.2s ease'\n              }}\n              onClick={() => window.location.href = '/shares'}\n              onMouseEnter={(e) => {\n                e.currentTarget.style.backgroundColor = '#bae7ff';\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.backgroundColor = '#e6f7ff';\n              }}\n              >\n                <Space>\n                  <ShareAltOutlined style={{ fontSize: '20px', color: '#1890ff' }} />\n                  <div>\n                    <Text strong>分享文件</Text>\n                    <br />\n                    <Text type=\"secondary\" style={{ fontSize: '12px' }}>创建和管理分享链接</Text>\n                  </div>\n                </Space>\n              </div>\n            </Space>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Dashboard;","import React, { useState } from 'react';\nimport { \n  Modal, \n  Form, \n  Input, \n  DatePicker, \n  InputNumber, \n  Switch, \n  Button, \n  message, \n  Space,\n  Typography,\n  Divider,\n  Alert\n} from 'antd';\nimport { \n  ShareAltOutlined, \n  CopyOutlined, \n  LockOutlined,\n  ClockCircleOutlined,\n  NumberOutlined\n} from '@ant-design/icons';\nimport api from '../services/api';\nimport dayjs from 'dayjs';\n\nconst { Title, Text } = Typography;\n\nconst ShareModal = ({ visible, onCancel, file, onSuccess }) => {\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n  const [shareLink, setShareLink] = useState('');\n  const [shareCreated, setShareCreated] = useState(false);\n\n  const handleSubmit = async (values) => {\n    try {\n      setLoading(true);\n      \n      const shareData = {\n        password: values.password || undefined,\n        expire_at: values.expire_at ? values.expire_at.toISOString() : undefined,\n        max_downloads: values.max_downloads || undefined\n      };\n\n      const response = await api.post(`/api/files/${file.id}/share/`, shareData);\n      \n      const fullShareLink = `${window.location.origin}/share/${response.data.share_code}`;\n      setShareLink(fullShareLink);\n      setShareCreated(true);\n      \n      message.success('分享创建成功！');\n      onSuccess?.();\n    } catch (error) {\n      message.error(error.response?.data?.error || '创建分享失败');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCopyLink = () => {\n    navigator.clipboard.writeText(shareLink);\n    message.success('链接已复制到剪贴板');\n  };\n\n  const handleCancel = () => {\n    form.resetFields();\n    setShareLink('');\n    setShareCreated(false);\n    onCancel();\n  };\n\n  const disabledDate = (current) => {\n    return current && current < dayjs().startOf('day');\n  };\n\n  return (\n    <Modal\n      title={\n        <Space>\n          <ShareAltOutlined />\n          创建文件分享\n        </Space>\n      }\n      open={visible}\n      onCancel={handleCancel}\n      footer={null}\n      width={600}\n    >\n      {!shareCreated ? (\n        <>\n          <Alert\n            message={`分享文件: ${file?.name}`}\n            type=\"info\"\n            showIcon\n            style={{ marginBottom: 20 }}\n          />\n          \n          <Form\n            form={form}\n            layout=\"vertical\"\n            onFinish={handleSubmit}\n          >\n            <Form.Item\n              name=\"password\"\n              label={\n                <Space>\n                  <LockOutlined />\n                  访问密码（可选）\n                </Space>\n              }\n              help=\"留空则无需密码即可访问\"\n            >\n              <Input.Password placeholder=\"设置访问密码\" />\n            </Form.Item>\n\n            <Divider />\n\n            <Form.Item\n              name=\"expire_at\"\n              label={\n                <Space>\n                  <ClockCircleOutlined />\n                  过期时间（可选）\n                </Space>\n              }\n              help=\"留空则永不过期\"\n            >\n              <DatePicker\n                showTime\n                placeholder=\"选择过期时间\"\n                disabledDate={disabledDate}\n                style={{ width: '100%' }}\n              />\n            </Form.Item>\n\n            <Form.Item\n              name=\"max_downloads\"\n              label={\n                <Space>\n                  <NumberOutlined />\n                  最大下载次数（可选）\n                </Space>\n              }\n              help=\"留空则无限制\"\n            >\n              <InputNumber\n                placeholder=\"设置最大下载次数\"\n                min={1}\n                style={{ width: '100%' }}\n              />\n            </Form.Item>\n\n            <Divider />\n\n            <Form.Item>\n              <Space style={{ width: '100%', justifyContent: 'flex-end' }}>\n                <Button onClick={handleCancel}>\n                  取消\n                </Button>\n                <Button \n                  type=\"primary\" \n                  htmlType=\"submit\" \n                  loading={loading}\n                  icon={<ShareAltOutlined />}\n                >\n                  创建分享\n                </Button>\n              </Space>\n            </Form.Item>\n          </Form>\n        </>\n      ) : (\n        <div style={{ textAlign: 'center' }}>\n          <Title level={4}>\n            <ShareAltOutlined /> 分享创建成功！\n          </Title>\n          \n          <div style={{ \n            background: '#f5f5f5', \n            padding: 15, \n            borderRadius: 8, \n            margin: '20px 0',\n            wordBreak: 'break-all'\n          }}>\n            <Text copyable={{ text: shareLink }}>\n              {shareLink}\n            </Text>\n          </div>\n\n          <Space>\n            <Button \n              type=\"primary\" \n              icon={<CopyOutlined />}\n              onClick={handleCopyLink}\n            >\n              复制链接\n            </Button>\n            <Button onClick={handleCancel}>\n              关闭\n            </Button>\n          </Space>\n\n          <Alert\n            message=\"分享提示\"\n            description=\"任何人都可以通过此链接访问文件，请谨慎分享。如需取消分享，请在'我的分享'页面中删除。\"\n            type=\"warning\"\n            showIcon\n            style={{ marginTop: 20 }}\n          />\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default ShareModal;","import React, { useState } from 'react';\nimport { \n  Card, \n  Button, \n  Table, \n  Modal, \n  Form, \n  Input, \n  Upload, \n  message,\n  Space,\n  Popconfirm,\n  Tag,\n  Typography,\n  Row,\n  Col,\n  Tooltip\n} from 'antd';\nimport { \n  UploadOutlined, \n  FolderAddOutlined, \n  DeleteOutlined,\n  ShareAltOutlined,\n  FileOutlined,\n  FolderOutlined,\n  ArrowLeftOutlined,\n  CloudDownloadOutlined\n} from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\n\nconst { Title, Text } = Typography;\nconst { Dragger } = Upload;\n\nconst Files = () => {\n  const { folderId } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n\n  const { data: folders = [] } = useQuery(\n    ['folders', folderId],\n    () => api.get('/api/files/folders/', { \n      params: folderId ? { parent_id: folderId } : {} \n    }).then(res => res.data)\n  );\n\n  const { data: filesData, isLoading } = useQuery(\n    ['files', folderId],\n    () => api.get('/api/files/', { \n      params: folderId ? { folder_id: folderId } : {} \n    }).then(res => res.data),\n    { refetchOnWindowFocus: false }\n  );\n\n  const uploadMutation = useMutation(\n    (fileObj) => {\n      const data = new FormData();\n      data.append('file', fileObj);\n      if (folderId) {\n        data.append('folder_id', folderId);\n      }\n      // 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\n      return api.post('/api/files/upload/', data, {\n        headers: {\n          'Content-Type': undefined,\n        },\n      });\n    },\n    {\n      onSuccess: () => {\n        message.success('文件上传成功！');\n        setUploadModalVisible(false);\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '上传失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const createFolderMutation = useMutation(\n    (data) => api.post('/api/files/folders/create/', {\n      ...data,\n      parent_id: folderId\n    }),\n    {\n      onSuccess: () => {\n        message.success('文件夹创建成功！');\n        setFolderModalVisible(false);\n        folderForm.resetFields();\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '创建失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const deleteFileMutation = useMutation(\n    (fileId) => api.delete(`/api/files/${fileId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件删除成功！');\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const downloadFile = async (file) => {\n    try {\n      message.loading('正在准备下载...', 0);\n      \n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const { download_url, filename, method } = response.data;\n      \n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        \n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n      \n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        \n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([response.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        message.destroy();\n        const errorMsg = error.response?.data?.error || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n\n  const deleteFolderMutation = useMutation(\n    (folderId) => api.delete(`/api/files/folders/${folderId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件夹删除成功！');\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({ file, onSuccess, onError }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: (error) => onError(error)\n      });\n    },\n    showUploadList: false,\n  };\n\n  const folderColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FolderOutlined style={{ color: '#fa709a', fontSize: '18px' }} />\n          <Button \n            type=\"link\" \n            onClick={() => navigate(`/files/${record.id}`)}\n            style={{ padding: 0, height: 'auto' }}\n          >\n            {text}\n          </Button>\n        </Space>\n      ),\n    },\n    {\n      title: '文件数量',\n      dataIndex: 'files_count',\n      key: 'files_count',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Popconfirm\n            title=\"确定删除这个文件夹吗？\"\n            onConfirm={() => deleteFolderMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button \n              type=\"text\" \n              danger \n              icon={<DeleteOutlined />}\n              size=\"small\"\n            />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const fileColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FileOutlined style={{ \n            color: getFileIconColor(record.file_extension),\n            fontSize: '18px' \n          }} />\n          <Tooltip title={record.original_name}>\n            <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\n          </Tooltip>\n        </Space>\n      ),\n    },\n    {\n      title: '大小',\n      dataIndex: 'size_display',\n      key: 'size_display',\n    },\n    {\n      title: '类型',\n      dataIndex: 'file_type',\n      key: 'file_type',\n      render: (type) => (\n        <Tag color=\"blue\">{type || '未知'}</Tag>\n      ),\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Tooltip title=\"下载文件\">\n            <Button \n              type=\"text\" \n              icon={<CloudDownloadOutlined />}\n              size=\"small\"\n              onClick={() => downloadFile(record)}\n            />\n          </Tooltip>\n          <Tooltip title=\"分享文件\">\n            <Button \n              type=\"text\" \n              icon={<ShareAltOutlined />}\n              size=\"small\"\n              onClick={() => handleShareFile(record.id)}\n            />\n          </Tooltip>\n          <Popconfirm\n            title=\"确定删除这个文件吗？\"\n            onConfirm={() => deleteFileMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Tooltip title=\"删除文件\">\n              <Button \n                type=\"text\" \n                danger \n                icon={<DeleteOutlined />}\n                size=\"small\"\n              />\n            </Tooltip>\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const getFileIconColor = (extension) => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e',\n    };\n    return colorMap[extension] || '#667eea';\n  };\n\n  const [shareModalVisible, setShareModalVisible] = useState(false);\n  const [selectedFileId, setSelectedFileId] = useState(null);\n\n  const handleShareFile = (fileId) => {\n    setSelectedFileId(fileId);\n    setShareModalVisible(true);\n  };\n\n  const handleShareModalOk = (shareData) => {\n    setShareModalVisible(false);\n    setSelectedFileId(null);\n    queryClient.invalidateQueries('my-shares');\n  };\n\n  const handleShareModalCancel = () => {\n    setShareModalVisible(false);\n    setSelectedFileId(null);\n  };\n\n  return (\n    <div>\n      <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Space>\n          {folderId && (\n            <Button \n              icon={<ArrowLeftOutlined />} \n              onClick={() => navigate('/files')}\n            >\n              返回上级\n            </Button>\n          )}\n          <Title level={2} style={{ color: '#333', margin: 0 }}>\n            我的文件\n          </Title>\n        </Space>\n        \n        <Space>\n          <Button \n            type=\"primary\" \n            icon={<UploadOutlined />}\n            onClick={() => setUploadModalVisible(true)}\n            className=\"cel-button\"\n          >\n            上传文件\n          </Button>\n          <Button \n            icon={<FolderAddOutlined />}\n            onClick={() => setFolderModalVisible(true)}\n            className=\"cel-button\"\n          >\n            新建文件夹\n          </Button>\n        </Space>\n      </div>\n\n      <Row gutter={[24, 24]}>\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件夹\">\n            <Table\n              columns={folderColumns}\n              dataSource={folders}\n              rowKey=\"id\"\n              pagination={false}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件\">\n            <Table\n              columns={fileColumns}\n              dataSource={filesData?.results || filesData || []}\n              rowKey=\"id\"\n              loading={isLoading}\n              pagination={{\n                total: filesData?.count,\n                pageSize: 20,\n                showSizeChanger: false,\n                showQuickJumper: true,\n              }}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* 上传文件模态框 */}\n      <Modal\n        title=\"上传文件\"\n        open={uploadModalVisible}\n        onCancel={() => setUploadModalVisible(false)}\n        footer={null}\n        width={600}\n      >\n        <Dragger {...uploadProps}>\n          <p className=\"ant-upload-drag-icon\">\n            <UploadOutlined style={{ fontSize: '48px', color: '#667eea' }} />\n          </p>\n          <p className=\"ant-upload-text\">点击或拖拽文件到此区域上传</p>\n          <p className=\"ant-upload-hint\">\n            支持单个文件上传，文件大小不能超过系统限制\n          </p>\n        </Dragger>\n      </Modal>\n\n      {/* 创建文件夹模态框 */}\n      <Modal\n        title=\"新建文件夹\"\n        open={folderModalVisible}\n        onOk={() => folderForm.submit()}\n        onCancel={() => setFolderModalVisible(false)}\n        confirmLoading={createFolderMutation.isLoading}\n      >\n        <Form\n          form={folderForm}\n          layout=\"vertical\"\n          onFinish={(values) => createFolderMutation.mutate(values)}\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"文件夹名称\"\n            rules={[{ required: true, message: '请输入文件夹名称' }]}\n          >\n            <Input placeholder=\"请输入文件夹名称\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 分享模态框 */}\n      <ShareModal\n        visible={shareModalVisible}\n        onCancel={handleShareModalCancel}\n        onOk={handleShareModalOk}\n        fileId={selectedFileId}\n      />\n    </div>\n  );\n};\n\nexport default Files;","\n/**\n * 格式化字节数为可读格式\n */\nexport const formatBytes = (bytes) => {\n  if (bytes === 0) return '0 B';\n  \n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  \n  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n};\n\n/**\n * 格式化日期时间\n */\nexport const formatDateTime = (dateString) => {\n  if (!dateString) return '-';\n  \n  const date = new Date(dateString);\n  return date.toLocaleString('zh-CN', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\n/**\n * 获取文件图标\n */\nexport const getFileIcon = (fileName, fileType) => {\n  const extension = (fileType || fileName?.split('.').pop()?.toLowerCase()) || '';\n  \n  const iconMap = {\n    // 图片\n    'jpg': 'FileImageOutlined',\n    'jpeg': 'FileImageOutlined',\n    'png': 'FileImageOutlined',\n    'gif': 'FileImageOutlined',\n    'bmp': 'FileImageOutlined',\n    'svg': 'FileImageOutlined',\n    \n    // 文档\n    'pdf': 'FilePdfOutlined',\n    'doc': 'FileWordOutlined',\n    'docx': 'FileWordOutlined',\n    'xls': 'FileExcelOutlined',\n    'xlsx': 'FileExcelOutlined',\n    'ppt': 'FilePptOutlined',\n    'pptx': 'FilePptOutlined',\n    'txt': 'FileTextOutlined',\n    'md': 'FileMarkdownOutlined',\n    \n    // 视频\n    'mp4': 'VideoCameraOutlined',\n    'avi': 'VideoCameraOutlined',\n    'mov': 'VideoCameraOutlined',\n    'wmv': 'VideoCameraOutlined',\n    'flv': 'VideoCameraOutlined',\n    'mkv': 'VideoCameraOutlined',\n    \n    // 音频\n    'mp3': 'AudioOutlined',\n    'wav': 'AudioOutlined',\n    'flac': 'AudioOutlined',\n    'aac': 'AudioOutlined',\n    \n    // 压缩文件\n    'zip': 'FileZipOutlined',\n    'rar': 'FileZipOutlined',\n    '7z': 'FileZipOutlined',\n    'tar': 'FileZipOutlined',\n    'gz': 'FileZipOutlined',\n    \n    // 代码\n    'js': 'CodeOutlined',\n    'jsx': 'CodeOutlined',\n    'ts': 'CodeOutlined',\n    'tsx': 'CodeOutlined',\n    'html': 'CodeOutlined',\n    'css': 'CodeOutlined',\n    'json': 'CodeOutlined',\n    'xml': 'CodeOutlined',\n    'py': 'CodeOutlined',\n    'java': 'CodeOutlined',\n    'cpp': 'CodeOutlined',\n    'c': 'CodeOutlined',\n  };\n  \n  return iconMap[extension] || 'FileOutlined';\n};","import React, { useState } from 'react';\nimport { \n  Card, \n  Table, \n  Button, \n  Modal, \n  Form, \n  Input, \n  DatePicker, \n  InputNumber,\n  message,\n  Space,\n  Tag,\n  Typography,\n  Popconfirm,\n  Tooltip\n} from 'antd';\nimport { \n  ShareAltOutlined, \n  PlusOutlined, \n  DeleteOutlined,\n  CopyOutlined,\n  EyeOutlined\n} from '@ant-design/icons';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport dayjs from 'dayjs';\nimport api from '../services/api';\nimport { formatBytes, formatDateTime, getFileIcon } from '../utils/format';\n\nconst { Title, Text } = Typography;\nconst { RangePicker } = DatePicker;\n\nconst Shares = () => {\n  const queryClient = useQueryClient();\n  const [createModalVisible, setCreateModalVisible] = useState(false);\n  const [shareForm] = Form.useForm();\n\n  const { data: shares = [], isLoading } = useQuery(\n    'my-shares',\n    () => api.get('/api/files/shares/').then(res => res.data)\n  );\n\n  const createShareMutation = useMutation(\n    (fileId) => api.post(`/api/files/${fileId}/share/`),\n    {\n      onSuccess: () => {\n        message.success('分享创建成功！');\n        setCreateModalVisible(false);\n        shareForm.resetFields();\n        queryClient.invalidateQueries('my-shares');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '创建失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const deleteShareMutation = useMutation(\n    (shareId) => api.delete(`/api/files/shares/${shareId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('分享已取消！');\n        queryClient.invalidateQueries('my-shares');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '取消失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const columns = [\n    {\n      title: '文件名',\n      dataIndex: 'file_name',\n      key: 'file_name',\n      render: (text) => (\n        <Tooltip title={text}>\n          <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\n        </Tooltip>\n      ),\n    },\n    {\n      title: '文件大小',\n      dataIndex: 'file_size_display',\n      key: 'file_size_display',\n    },\n    {\n      title: '分享码',\n      dataIndex: 'share_code',\n      key: 'share_code',\n      render: (code, record) => (\n        <Space>\n          <Tag color=\"blue\">{code}</Tag>\n          <Button\n            type=\"text\"\n            size=\"small\"\n            icon={<CopyOutlined />}\n            onClick={() => {\n              navigator.clipboard.writeText(`${window.location.origin}/share/${code}`);\n              message.success('分享链接已复制到剪贴板！');\n            }}\n          />\n        </Space>\n      ),\n    },\n    {\n      title: '状态',\n      dataIndex: 'is_active',\n      key: 'is_active',\n      render: (isActive, record) => (\n        <Space direction=\"vertical\" size=\"small\">\n          <Tag color={isActive ? 'green' : 'red'}>\n            {isActive ? '有效' : '无效'}\n          </Tag>\n          {record.is_expired && (\n            <Tag color=\"orange\">已过期</Tag>\n          )}\n        </Space>\n      ),\n    },\n    {\n      title: '下载次数',\n      dataIndex: 'download_count',\n      key: 'download_count',\n      render: (count, record) => (\n        <Text>\n          {count} / {record.max_downloads || '无限制'}\n        </Text>\n      ),\n    },\n    {\n      title: '过期时间',\n      dataIndex: 'expire_at',\n      key: 'expire_at',\n      render: (time) => time ? dayjs(time).format('YYYY-MM-DD HH:mm') : '永不过期',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (time) => dayjs(time).format('YYYY-MM-DD HH:mm'),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Button\n            type=\"text\"\n            size=\"small\"\n            icon={<EyeOutlined />}\n            onClick={() => window.open(`/share/${record.share_code}`, '_blank')}\n          />\n          <Popconfirm\n            title=\"确定取消这个分享吗？\"\n            onConfirm={() => deleteShareMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button\n              type=\"text\"\n              danger\n              size=\"small\"\n              icon={<DeleteOutlined />}\n            />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  return (\n    <div>\n      <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Title level={2} style={{ color: '#333', margin: 0 }}>\n          我的分享\n        </Title>\n        \n        <Button \n          type=\"primary\" \n          icon={<PlusOutlined />}\n          onClick={() => setCreateModalVisible(true)}\n          className=\"cel-button\"\n        >\n          创建分享\n        </Button>\n      </div>\n\n      <Card className=\"cel-card\">\n        <Table\n          columns={columns}\n          dataSource={shares}\n          rowKey=\"id\"\n          loading={isLoading}\n          pagination={{\n            pageSize: 10,\n            showSizeChanger: false,\n            showQuickJumper: true,\n          }}\n        />\n      </Card>\n\n      {/* 创建分享模态框 */}\n      <Modal\n        title=\"创建文件分享\"\n        open={createModalVisible}\n        onOk={() => shareForm.submit()}\n        onCancel={() => setCreateModalVisible(false)}\n        confirmLoading={createShareMutation.isLoading}\n        width={600}\n      >\n        <Form\n          form={shareForm}\n          layout=\"vertical\"\n          onFinish={(values) => {\n            // 这里需要先选择文件，然后创建分享\n            // 简化起见，这里只是示例\n            message.info('请先在文件页面选择要分享的文件');\n          }}\n        >\n          <Form.Item>\n            <Text type=\"secondary\">\n              请前往\"我的文件\"页面，点击文件操作栏的分享按钮来创建分享链接。\n            </Text>\n          </Form.Item>\n          \n          <Form.Item\n            name=\"password\"\n            label=\"访问密码（可选）\"\n          >\n            <Input.Password placeholder=\"留空表示无需密码\" />\n          </Form.Item>\n          \n          <Form.Item\n            name=\"expire_at\"\n            label=\"过期时间（可选）\"\n          >\n            <DatePicker\n              showTime\n              placeholder=\"留空表示永不过期\"\n              style={{ width: '100%' }}\n            />\n          </Form.Item>\n          \n          <Form.Item\n            name=\"max_downloads\"\n            label=\"最大下载次数（可选）\"\n          >\n            <InputNumber\n              placeholder=\"留空表示无限制\"\n              style={{ width: '100%' }}\n              min={1}\n            />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Shares;","import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  Card, \n  Button, \n  Input, \n  Spin, \n  message, \n  Descriptions, \n  Tag,\n  Space,\n  Typography,\n  Alert\n} from 'antd';\nimport { \n  DownloadOutlined, \n  LockOutlined, \n  FileOutlined,\n  ClockCircleOutlined,\n  NumberOutlined\n} from '@ant-design/icons';\nimport api from '../services/api';\n\nconst { Title, Text } = Typography;\n\nconst ShareView = () => {\n  const { shareCode } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [downloading, setDownloading] = useState(false);\n  const [shareInfo, setShareInfo] = useState(null);\n  const [password, setPassword] = useState('');\n  const [passwordRequired, setPasswordRequired] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchShareInfo();\n  }, [shareCode]);\n\n  const fetchShareInfo = async (pwd = '') => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      const response = await api.get(`/api/files/share/${shareCode}/`, {\n        params: pwd ? { password: pwd } : {}\n      });\n      \n      setShareInfo(response.data);\n      setPasswordRequired(false);\n    } catch (error) {\n      if (error.response?.status === 403 && error.response?.data?.error === '需要密码') {\n        setPasswordRequired(true);\n      } else if (error.response?.status === 404) {\n        setError('分享链接不存在或已过期');\n      } else {\n        setError(error.response?.data?.error || '获取分享信息失败');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePasswordSubmit = () => {\n    if (!password.trim()) {\n      message.error('请输入密码');\n      return;\n    }\n    fetchShareInfo(password);\n  };\n\n  const handleDownload = async () => {\n    try {\n      setDownloading(true);\n      \n      const response = await api.post(`/api/files/share/${shareCode}/download/`, \n        passwordRequired ? { password } : {},\n        {\n          responseType: 'blob'\n        }\n      );\n\n      // 创建下载链接\n      const blob = new Blob([response.data]);\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      \n      // 从响应头获取文件名\n      const contentDisposition = response.headers['content-disposition'];\n      let filename = shareInfo?.file_name || 'download';\n      if (contentDisposition) {\n        const filenameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\n        if (filenameMatch && filenameMatch[1]) {\n          filename = filenameMatch[1].replace(/['\"]/g, '');\n        }\n      }\n      \n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n      message.success('文件下载成功！');\n      \n      // 更新下载次数\n      if (shareInfo) {\n        setShareInfo({\n          ...shareInfo,\n          download_count: shareInfo.download_count + 1\n        });\n      }\n    } catch (error) {\n      message.error(error.response?.data?.error || '下载失败');\n    } finally {\n      setDownloading(false);\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (!bytes) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return null;\n    return new Date(dateString).toLocaleString('zh-CN');\n  };\n\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        minHeight: '60vh' \n      }}>\n        <Spin size=\"large\" tip=\"加载中...\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ maxWidth: 600, margin: '50px auto' }}>\n        <Alert\n          message=\"访问失败\"\n          description={error}\n          type=\"error\"\n          showIcon\n          action={\n            <Button type=\"primary\" onClick={() => navigate('/login')}>\n              返回登录\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  if (passwordRequired && !shareInfo) {\n    return (\n      <div style={{ maxWidth: 400, margin: '100px auto' }}>\n        <Card>\n          <Title level={3} style={{ textAlign: 'center', marginBottom: 30 }}>\n            <LockOutlined /> 访问受保护的分享\n          </Title>\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <Input.Password\n              placeholder=\"请输入访问密码\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onPressEnter={handlePasswordSubmit}\n            />\n            <Button \n              type=\"primary\" \n              block \n              onClick={handlePasswordSubmit}\n              loading={loading}\n            >\n              解锁访问\n            </Button>\n          </Space>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ maxWidth: 800, margin: '50px auto', padding: '0 20px' }}>\n      <Card>\n        <div style={{ textAlign: 'center', marginBottom: 30 }}>\n          <FileOutlined style={{ fontSize: 64, color: '#1890ff', marginBottom: 16 }} />\n          <Title level={2}>{shareInfo.file_name}</Title>\n        </div>\n\n        <Descriptions column={1} bordered style={{ marginBottom: 30 }}>\n          <Descriptions.Item label=\"文件大小\">\n            <Tag color=\"blue\">{formatFileSize(shareInfo.file_size)}</Tag>\n          </Descriptions.Item>\n          \n          <Descriptions.Item label=\"下载次数\">\n            <Space>\n              <NumberOutlined />\n              <Text strong>\n                {shareInfo.download_count} / {shareInfo.max_downloads || '无限制'}\n              </Text>\n            </Space>\n          </Descriptions.Item>\n\n          {shareInfo.expire_at && (\n            <Descriptions.Item label=\"过期时间\">\n              <Space>\n                <ClockCircleOutlined />\n                <Text type={new Date(shareInfo.expire_at) < new Date() ? 'danger' : 'success'}>\n                  {formatDate(shareInfo.expire_at)}\n                </Text>\n              </Space>\n            </Descriptions.Item>\n          )}\n\n          {shareInfo.password_protected && (\n            <Descriptions.Item label=\"访问保护\">\n              <Tag color=\"orange\"><LockOutlined /> 密码保护</Tag>\n            </Descriptions.Item>\n          )}\n\n          <Descriptions.Item label=\"分享时间\">\n            {formatDate(shareInfo.created_at)}\n          </Descriptions.Item>\n        </Descriptions>\n\n        <div style={{ textAlign: 'center' }}>\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            icon={<DownloadOutlined />}\n            onClick={handleDownload}\n            loading={downloading}\n            disabled={\n              shareInfo.max_downloads > 0 && \n              shareInfo.download_count >= shareInfo.max_downloads\n            }\n          >\n            {shareInfo.max_downloads > 0 && \n             shareInfo.download_count >= shareInfo.max_downloads\n              ? '下载次数已用完'\n              : '下载文件'\n            }\n          </Button>\n        </div>\n\n        <div style={{ textAlign: 'center', marginTop: 20 }}>\n          <Button type=\"link\" onClick={() => navigate('/login')}>\n            返回登录页面\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport default ShareView;","import React, { useState } from 'react';\nimport { \n  Card, \n  Form, \n  Input, \n  Button, \n  Avatar, \n  Upload, \n  message,\n  Typography,\n  Row,\n  Col,\n  Space,\n  Progress\n} from 'antd';\nimport { \n  UserOutlined, \n  UploadOutlined, \n  SaveOutlined \n} from '@ant-design/icons';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useQuery } from 'react-query';\nimport api from '../services/api';\n\nconst { Title, Text } = Typography;\n\nconst Profile = () => {\n  const { user, updateProfile } = useAuth();\n  const [form] = Form.useForm();\n  const [loading, setLoading] = useState(false);\n\n  const { data: storageInfo } = useQuery('storage-info', () =>\n    api.get('/api/files/storage/').then(res => res.data)\n  );\n\n  React.useEffect(() => {\n    if (user) {\n      form.setFieldsValue({\n        username: user.username,\n        email: user.email,\n        first_name: user.first_name,\n        last_name: user.last_name,\n      });\n    }\n  }, [user, form]);\n\n  const handleUpdateProfile = async (values) => {\n    setLoading(true);\n    const result = await updateProfile(values);\n    setLoading(false);\n    \n    if (result.success) {\n      message.success('个人资料更新成功！');\n    }\n  };\n\n  const handleAvatarUpload = async (file) => {\n    const formData = new FormData();\n    formData.append('avatar', file);\n\n    try {\n      setLoading(true);\n      // 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\n      const response = await api.post('/api/auth/upload-avatar/', formData, {\n        headers: {\n          'Content-Type': undefined,\n        },\n      });\n      \n      message.success('头像上传成功！');\n      // 更新用户信息\n      if (response.data.user) {\n        // 这里需要触发用户信息更新\n        window.location.reload(); // 简单的刷新方式\n      }\n    } catch (error) {\n      message.error(error.response?.data?.error || '头像上传失败！');\n    } finally {\n      setLoading(false);\n    }\n    \n    return false; // 阻止默认上传行为\n  };\n\n  const handleDeleteAvatar = async () => {\n    try {\n      setLoading(true);\n      await api.delete('/api/auth/delete-avatar/');\n      message.success('头像删除成功！');\n      window.location.reload();\n    } catch (error) {\n      message.error(error.response?.data?.error || '头像删除失败！');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const uploadProps = {\n    name: 'avatar',\n    beforeUpload: (file) => {\n      const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\n      if (!allowedTypes.includes(file.type)) {\n        message.error('只支持 JPG、PNG、GIF、WebP 格式的图片！');\n        return false;\n      }\n      const isLt2M = file.size / 1024 / 1024 < 2;\n      if (!isLt2M) {\n        message.error('图片大小不能超过 2MB！');\n        return false;\n      }\n      handleAvatarUpload(file);\n      return false;\n    },\n    showUploadList: false,\n  };\n\n  return (\n    <div>\n      <Title level={2} style={{ color: '#333', marginBottom: '24px' }}>\n        个人设置\n      </Title>\n\n      <Row gutter={[24, 24]}>\n        <Col xs={24} lg={8}>\n          <Card className=\"cel-card\" title=\"个人信息\">\n            <div style={{ textAlign: 'center', marginBottom: '24px' }}>\n              <Avatar\n                size={120}\n                src={user?.avatar ? `http://localhost:8000${user.avatar}` : undefined}\n                icon={<UserOutlined />}\n                style={{ marginBottom: '16px' }}\n              />\n              <div>\n                <Space>\n                  <Upload {...uploadProps}>\n                    <Button \n                      icon={<UploadOutlined />} \n                      size=\"small\"\n                      className=\"cel-button\"\n                      loading={loading}\n                    >\n                      更换头像\n                    </Button>\n                  </Upload>\n                  {user?.avatar && (\n                    <Button \n                      size=\"small\"\n                      onClick={handleDeleteAvatar}\n                      loading={loading}\n                    >\n                      删除头像\n                    </Button>\n                  )}\n                </Space>\n              </div>\n            </div>\n\n            <Space direction=\"vertical\" style={{ width: '100%' }}>\n              <div>\n                <Text type=\"secondary\">用户名</Text>\n                <div style={{ fontWeight: 'bold' }}>{user?.username}</div>\n              </div>\n              <div>\n                <Text type=\"secondary\">注册时间</Text>\n                <div>{user?.date_joined ? new Date(user.date_joined).toLocaleDateString() : '-'}</div>\n              </div>\n            </Space>\n          </Card>\n        </Col>\n\n        <Col xs={24} lg={16}>\n          <Card className=\"cel-card\" title=\"编辑资料\">\n            <Form\n              form={form}\n              layout=\"vertical\"\n              onFinish={handleUpdateProfile}\n            >\n              <Row gutter={16}>\n                <Col xs={24} sm={12}>\n                  <Form.Item\n                    name=\"first_name\"\n                    label=\"名字\"\n                  >\n                    <Input placeholder=\"请输入名字\" />\n                  </Form.Item>\n                </Col>\n                <Col xs={24} sm={12}>\n                  <Form.Item\n                    name=\"last_name\"\n                    label=\"姓氏\"\n                  >\n                    <Input placeholder=\"请输入姓氏\" />\n                  </Form.Item>\n                </Col>\n              </Row>\n\n              <Form.Item\n                name=\"email\"\n                label=\"邮箱地址\"\n                rules={[\n                  { type: 'email', message: '请输入有效的邮箱地址' }\n                ]}\n              >\n                <Input placeholder=\"请输入邮箱地址\" />\n              </Form.Item>\n\n              <Form.Item>\n                <Button \n                  type=\"primary\" \n                  htmlType=\"submit\"\n                  loading={loading}\n                  icon={<SaveOutlined />}\n                  className=\"cel-button\"\n                >\n                  保存更改\n                </Button>\n              </Form.Item>\n            </Form>\n          </Card>\n        </Col>\n      </Row>\n\n      <Row gutter={[24, 24]} style={{ marginTop: '24px' }}>\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"存储信息\">\n            <Row gutter={[24, 24]}>\n              <Col xs={24} sm={8}>\n                <div style={{ textAlign: 'center' }}>\n                  <Title level={3} style={{ color: '#667eea', margin: 0 }}>\n                    {storageInfo?.storage_quota_display || '0 B'}\n                  </Title>\n                  <Text type=\"secondary\">存储配额</Text>\n                </div>\n              </Col>\n              <Col xs={24} sm={8}>\n                <div style={{ textAlign: 'center' }}>\n                  <Title level={3} style={{ color: '#ff6b6b', margin: 0 }}>\n                    {storageInfo?.used_storage_display || '0 B'}\n                  </Title>\n                  <Text type=\"secondary\">已使用</Text>\n                </div>\n              </Col>\n              <Col xs={24} sm={8}>\n                <div style={{ textAlign: 'center' }}>\n                  <Title level={3} style={{ color: '#43e97b', margin: 0 }}>\n                    {storageInfo?.available_storage_display || '0 B'}\n                  </Title>\n                  <Text type=\"secondary\">可用空间</Text>\n                </div>\n              </Col>\n            </Row>\n\n            <div style={{ marginTop: '24px' }}>\n              <Text strong>存储使用率</Text>\n              <Progress\n                percent={storageInfo?.storage_usage_percentage || 0}\n                strokeColor={{\n                  '0%': '#667eea',\n                  '100%': '#764ba2',\n                }}\n                format={(percent) => `${percent?.toFixed(1)}%`}\n              />\n            </div>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default Profile;","import React from 'react';\nimport { Layout, Menu } from 'antd';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport {\n  DashboardOutlined,\n  FolderOutlined,\n  ShareAltOutlined,\n  UserOutlined\n} from '@ant-design/icons';\n\nconst { Sider } = Layout;\n\nconst Sidebar = () => {\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const menuItems = [\n    {\n      key: '/dashboard',\n      icon: <DashboardOutlined />,\n      label: '仪表盘',\n    },\n    {\n      key: '/files',\n      icon: <FolderOutlined />,\n      label: '我的文件',\n    },\n    {\n      key: '/shares',\n      icon: <ShareAltOutlined />,\n      label: '我的分享',\n    },\n    {\n      key: '/profile',\n      icon: <UserOutlined />,\n      label: '个人设置',\n    },\n  ];\n\n  const handleMenuClick = ({ key }) => {\n    navigate(key);\n  };\n\n  const getSelectedKey = () => {\n    const path = location.pathname;\n    if (path.startsWith('/files')) return '/files';\n    return path;\n  };\n\n  return (\n    <Sider\n      width={240}\n      style={{\n        background: 'rgba(255, 255, 255, 0.95)',\n        backdropFilter: 'blur(10px)',\n        borderRight: '1px solid rgba(255, 255, 255, 0.2)',\n      }}\n    >\n      <div style={{ \n        height: '64px',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        borderBottom: '1px solid rgba(255, 255, 255, 0.2)'\n      }}>\n        <div style={{\n          width: '50px',\n          height: '50px',\n          background: 'linear-gradient(145deg, #667eea, #764ba2)',\n          borderRadius: '15px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: 'white',\n          fontSize: '24px',\n          fontWeight: 'bold'\n        }}>\n          ☁\n        </div>\n      </div>\n      \n      <Menu\n        mode=\"inline\"\n        selectedKeys={[getSelectedKey()]}\n        items={menuItems}\n        onClick={handleMenuClick}\n        style={{\n          border: 'none',\n          background: 'transparent',\n          fontSize: '16px'\n        }}\n      />\n    </Sider>\n  );\n};\n\nexport default Sidebar;","import React from 'react';\nimport { Layout, Avatar, Dropdown, Space, Typography } from 'antd';\nimport { UserOutlined, LogoutOutlined, SettingOutlined } from '@ant-design/icons';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst { Header: AntHeader } = Layout;\nconst { Text } = Typography;\n\nconst Header = () => {\n  const { user, logout } = useAuth();\n\n  const menuItems = [\n    {\n      key: 'profile',\n      icon: <SettingOutlined />,\n      label: '个人设置',\n      onClick: () => window.location.href = '/profile'\n    },\n    {\n      type: 'divider',\n    },\n    {\n      key: 'logout',\n      icon: <LogoutOutlined />,\n      label: '退出登录',\n      onClick: logout\n    },\n  ];\n\n  return (\n    <AntHeader \n      style={{ \n        padding: '0 24px', \n        background: 'rgba(255, 255, 255, 0.95)',\n        backdropFilter: 'blur(10px)',\n        borderBottom: '1px solid rgba(255, 255, 255, 0.2)',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}\n    >\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <div style={{\n          width: '40px',\n          height: '40px',\n          background: 'linear-gradient(145deg, #ff6b6b, #ff8e53)',\n          borderRadius: '12px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: 'white',\n          fontSize: '20px',\n          fontWeight: 'bold',\n          marginRight: '12px'\n        }}>\n          ☁\n        </div>\n        <Text style={{ fontSize: '20px', fontWeight: 'bold', color: '#333' }}>\n          云盘系统\n        </Text>\n      </div>\n\n      <Dropdown menu={{ items: menuItems }} placement=\"bottomRight\">\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          cursor: 'pointer',\n          padding: '8px 12px',\n          borderRadius: '20px',\n          transition: 'background 0.3s ease'\n        }}\n        onMouseEnter={(e) => e.currentTarget.style.background = 'rgba(0,0,0,0.05)'}\n        onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}\n        >\n          <Avatar \n            src={user?.avatar} \n            icon={<UserOutlined />} \n            size=\"small\"\n            style={{ marginRight: '8px' }}\n          />\n          <Space>\n            <Text strong>{user?.username}</Text>\n          </Space>\n        </div>\n      </Dropdown>\n    </AntHeader>\n  );\n};\n\nexport default Header;","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { Layout } from 'antd';\nimport { CloudOutlined } from '@ant-design/icons';\nimport './App.css';\n\nimport { useAuth } from './contexts/AuthContext';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Dashboard from './pages/Dashboard';\nimport Files from './pages/Files';\nimport Shares from './pages/Shares';\nimport ShareView from './pages/ShareView';\nimport Profile from './pages/Profile';\nimport Sidebar from './components/Sidebar';\nimport Header from './components/Header';\n\nconst { Content } = Layout;\n\nfunction App() {\n  const { user, loading } = useAuth();\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\">\n          <CloudOutlined />\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <Routes>\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/share/:shareCode\" element={<ShareView />} />\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n      </Routes>\n    );\n  }\n\n  return (\n    <Layout style={{ minHeight: '100vh' }}>\n      <Sidebar />\n      <Layout>\n        <Header />\n        <Content style={{ \n          margin: '24px 16px', \n          padding: '24px',\n          background: 'transparent'\n        }}>\n          <Routes>\n            <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\n            <Route path=\"/dashboard\" element={<Dashboard />} />\n            <Route path=\"/files\" element={<Files />} />\n            <Route path=\"/files/:folderId\" element={<Files />} />\n            <Route path=\"/shares\" element={<Shares />} />\n            <Route path=\"/profile\" element={<Profile />} />\n            <Route path=\"/share/:shareCode\" element={<ShareView />} />\n            <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n          </Routes>\n        </Content>\n      </Layout>\n    </Layout>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from 'react-query';\nimport { ConfigProvider } from 'antd';\nimport zhCN from 'antd/locale/zh_CN';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/zh-cn';\n\nimport App from './App';\nimport { AuthProvider } from './contexts/AuthContext';\nimport './index.css';\n\ndayjs.locale('zh-cn');\nconst queryClient = new QueryClient();\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <ConfigProvider locale={zhCN}>\n        <BrowserRouter>\n          <AuthProvider>\n            <App />\n          </AuthProvider>\n        </BrowserRouter>\n      </ConfigProvider>\n    </QueryClientProvider>\n  </React.StrictMode>\n);"],"sourceRoot":""}