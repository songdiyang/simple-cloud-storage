{"ast":null,"code":"var _jsxFileName = \"D:\\\\cloud-storage-system\\\\cloud-storage-system\\\\frontend\\\\src\\\\pages\\\\Files.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Button, Table, Modal, Form, Input, Upload, message, Space, Popconfirm, Tag, Typography, Row, Col, Tooltip, List, Avatar } from 'antd';\nimport { UploadOutlined, FolderAddOutlined, DeleteOutlined, ShareAltOutlined, FileOutlined, FolderOutlined, ArrowLeftOutlined, CloudDownloadOutlined } from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title,\n  Text\n} = Typography;\nconst {\n  Dragger\n} = Upload;\nconst Files = () => {\n  _s();\n  const {\n    folderId\n  } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n  const [isMobile, setIsMobile] = useState(false);\n\n  // 检测移动设备\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n  const {\n    data: folders = []\n  } = useQuery(['folders', folderId], () => api.get('/api/files/folders/', {\n    params: folderId ? {\n      parent_id: folderId\n    } : {}\n  }).then(res => res.data));\n  const {\n    data: filesData,\n    isLoading\n  } = useQuery(['files', folderId], () => api.get('/api/files/', {\n    params: folderId ? {\n      folder_id: folderId\n    } : {}\n  }).then(res => res.data), {\n    refetchOnWindowFocus: false\n  });\n  const uploadMutation = useMutation(fileObj => {\n    const data = new FormData();\n    data.append('file', fileObj);\n    if (folderId) {\n      data.append('folder_id', folderId);\n    }\n    // 明确设置Content-Type为multipart/form-data\n    return api.post('/api/files/upload/', data, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }, {\n    onSuccess: () => {\n      message.success('文件上传成功！');\n      setUploadModalVisible(false);\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response, _error$response$data, _error$response2;\n      console.error('Upload error:', error);\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || '上传失败';\n      message.error(`上传失败: ${errorMsg}`);\n\n      // 如果是认证错误，重定向到登录页\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n    }\n  });\n  const createFolderMutation = useMutation(data => api.post('/api/files/folders/create/', {\n    ...data,\n    parent_id: folderId\n  }), {\n    onSuccess: () => {\n      message.success('文件夹创建成功！');\n      setFolderModalVisible(false);\n      folderForm.resetFields();\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response3, _error$response3$data;\n      const errorMsg = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || '创建失败';\n      message.error(errorMsg);\n    }\n  });\n  const deleteFileMutation = useMutation(fileId => api.delete(`/api/files/${fileId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件删除成功！');\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response4, _error$response4$data;\n      const errorMsg = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const downloadFile = async file => {\n    try {\n      message.loading('正在准备下载...', 0);\n\n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const {\n        download_url,\n        filename,\n        method\n      } = response.data;\n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n\n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([response.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        var _error$response5, _error$response5$data;\n        message.destroy();\n        const errorMsg = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n  const deleteFolderMutation = useMutation(folderId => api.delete(`/api/files/folders/${folderId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件夹删除成功！');\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response6, _error$response6$data;\n      const errorMsg = ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({\n      file,\n      onSuccess,\n      onError\n    }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: error => onError(error)\n      });\n    },\n    showUploadList: false\n  };\n  const folderColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FolderOutlined, {\n        style: {\n          color: '#fa709a',\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        onClick: () => navigate(`/files/${record.id}`),\n        style: {\n          padding: 0,\n          height: 'auto'\n        },\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '文件数量',\n    dataIndex: 'files_count',\n    key: 'files_count'\n  }, {\n    title: '创建时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u5417\\uFF1F\",\n        onConfirm: () => deleteFolderMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          danger: true,\n          icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 21\n          }, this),\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }, this)\n  }];\n  const fileColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FileOutlined, {\n        style: {\n          color: getFileIconColor(record.file_extension),\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: record.original_name,\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          ellipsis: true,\n          style: {\n            maxWidth: '200px'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '大小',\n    dataIndex: 'size_display',\n    key: 'size_display'\n  }, {\n    title: '类型',\n    dataIndex: 'file_type',\n    key: 'file_type',\n    render: type => /*#__PURE__*/_jsxDEV(Tag, {\n      color: \"blue\",\n      children: type || '未知'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '上传时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u4E0B\\u8F7D\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(CloudDownloadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => downloadFile(record)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u5206\\u4EAB\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => handleShareFile(record)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\",\n        onConfirm: () => deleteFileMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u5220\\u9664\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            danger: true,\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 23\n            }, this),\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }, this)\n  }];\n  const getFileIconColor = extension => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e'\n    };\n    return colorMap[extension] || '#667eea';\n  };\n  const [shareModalVisible, setShareModalVisible] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const handleShareFile = file => {\n    setSelectedFile(file);\n    setShareModalVisible(true);\n  };\n  const handleShareModalOk = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n    queryClient.invalidateQueries('my-shares');\n  };\n  const handleShareModalCancel = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n  };\n\n  // 移动端文件夹列表项\n  const MobileFolderItem = ({\n    folder\n  }) => /*#__PURE__*/_jsxDEV(List.Item, {\n    style: {\n      padding: '12px 0',\n      borderBottom: '1px solid #f0f0f0',\n      cursor: 'pointer'\n    },\n    onClick: () => navigate(`/files/${folder.id}`),\n    actions: [/*#__PURE__*/_jsxDEV(Popconfirm, {\n      title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u5417\\uFF1F\",\n      onConfirm: () => deleteFolderMutation.mutate(folder.id),\n      okText: \"\\u786E\\u5B9A\",\n      cancelText: \"\\u53D6\\u6D88\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"text\",\n        danger: true,\n        size: \"small\",\n        icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 11\n      }, this)\n    }, \"delete\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        icon: /*#__PURE__*/_jsxDEV(FolderOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 31\n        }, this),\n        style: {\n          backgroundColor: '#fa709a'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 17\n      }, this),\n      title: folder.name,\n      description: `${folder.children_count} 个子文件夹, ${folder.files_count} 个文件`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 419,\n    columnNumber: 5\n  }, this);\n\n  // 移动端文件列表项\n  const MobileFileItem = ({\n    file\n  }) => /*#__PURE__*/_jsxDEV(List.Item, {\n    style: {\n      padding: '12px 0',\n      borderBottom: '1px solid #f0f0f0'\n    },\n    actions: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"text\",\n      size: \"small\",\n      icon: /*#__PURE__*/_jsxDEV(CloudDownloadOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 17\n      }, this),\n      onClick: () => downloadFile(file)\n    }, \"download\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: \"text\",\n      size: \"small\",\n      icon: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 17\n      }, this),\n      onClick: () => handleShareFile(file)\n    }, \"share\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 458,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n      title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\",\n      onConfirm: () => deleteFileMutation.mutate(file.id),\n      okText: \"\\u786E\\u5B9A\",\n      cancelText: \"\\u53D6\\u6D88\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"text\",\n        danger: true,\n        size: \"small\",\n        icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 472,\n        columnNumber: 11\n      }, this)\n    }, \"delete\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 9\n    }, this)],\n    children: /*#__PURE__*/_jsxDEV(List.Item.Meta, {\n      avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n        icon: /*#__PURE__*/_jsxDEV(FileOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 19\n        }, this),\n        style: {\n          backgroundColor: getFileIconColor(file.file_extension)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this),\n      title: /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: file.original_name,\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          ellipsis: true,\n          style: {\n            maxWidth: '200px'\n          },\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 11\n      }, this),\n      description: /*#__PURE__*/_jsxDEV(Space, {\n        direction: \"vertical\",\n        size: \"small\",\n        children: [/*#__PURE__*/_jsxDEV(Text, {\n          type: \"secondary\",\n          children: file.size_display\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tag, {\n          color: \"blue\",\n          size: \"small\",\n          children: file.file_type || '未知'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Text, {\n          type: \"secondary\",\n          style: {\n            fontSize: '12px'\n          },\n          children: new Date(file.created_at).toLocaleString()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 492,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 448,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: isMobile ? '16px' : '24px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        flexDirection: isMobile ? 'column' : 'row',\n        gap: isMobile ? '12px' : '0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Space, {\n        direction: isMobile ? 'vertical' : 'horizontal',\n        style: {\n          width: isMobile ? '100%' : 'auto'\n        },\n        children: [folderId && /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 21\n          }, this),\n          onClick: () => navigate('/files'),\n          style: {\n            width: isMobile ? '100%' : 'auto'\n          },\n          children: \"\\u8FD4\\u56DE\\u4E0A\\u7EA7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Title, {\n          level: isMobile ? 4 : 2,\n          style: {\n            color: '#333',\n            margin: 0\n          },\n          children: \"\\u6211\\u7684\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        direction: isMobile ? 'vertical' : 'horizontal',\n        style: {\n          width: isMobile ? '100%' : 'auto'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 19\n          }, this),\n          onClick: () => setUploadModalVisible(true),\n          className: \"cel-button\",\n          style: {\n            width: isMobile ? '100%' : 'auto'\n          },\n          children: \"\\u4E0A\\u4F20\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(FolderAddOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 537,\n            columnNumber: 19\n          }, this),\n          onClick: () => setFolderModalVisible(true),\n          className: \"cel-button\",\n          style: {\n            width: isMobile ? '100%' : 'auto'\n          },\n          children: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 7\n    }, this), isMobile ?\n    /*#__PURE__*/\n    // 移动端视图\n    _jsxDEV(Space, {\n      direction: \"vertical\",\n      style: {\n        width: '100%'\n      },\n      size: \"large\",\n      children: [folders.length > 0 && /*#__PURE__*/_jsxDEV(Card, {\n        className: \"cel-card\",\n        title: \"\\u6587\\u4EF6\\u5939\",\n        size: \"small\",\n        children: /*#__PURE__*/_jsxDEV(List, {\n          dataSource: folders,\n          renderItem: MobileFolderItem,\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Card, {\n        className: \"cel-card\",\n        title: \"\\u6587\\u4EF6\",\n        size: \"small\",\n        children: /*#__PURE__*/_jsxDEV(List, {\n          dataSource: (filesData === null || filesData === void 0 ? void 0 : filesData.results) || filesData || [],\n          renderItem: MobileFileItem,\n          loading: isLoading,\n          size: \"small\",\n          pagination: (filesData === null || filesData === void 0 ? void 0 : filesData.count) > 20 ? {\n            total: filesData === null || filesData === void 0 ? void 0 : filesData.count,\n            pageSize: 20,\n            showSizeChanger: false,\n            showQuickJumper: false,\n            simple: true\n          } : false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 9\n    }, this) :\n    /*#__PURE__*/\n    // 桌面端视图\n    _jsxDEV(Row, {\n      gutter: [24, 24],\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\\u5939\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: folderColumns,\n            dataSource: folders,\n            rowKey: \"id\",\n            pagination: false,\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: fileColumns,\n            dataSource: (filesData === null || filesData === void 0 ? void 0 : filesData.results) || filesData || [],\n            rowKey: \"id\",\n            loading: isLoading,\n            pagination: {\n              total: filesData === null || filesData === void 0 ? void 0 : filesData.count,\n              pageSize: 20,\n              showSizeChanger: false,\n              showQuickJumper: true\n            },\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u4E0A\\u4F20\\u6587\\u4EF6\",\n      open: uploadModalVisible,\n      onCancel: () => setUploadModalVisible(false),\n      footer: null,\n      width: 600,\n      children: /*#__PURE__*/_jsxDEV(Dragger, {\n        ...uploadProps,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-drag-icon\",\n          children: /*#__PURE__*/_jsxDEV(UploadOutlined, {\n            style: {\n              fontSize: '48px',\n              color: '#667eea'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-text\",\n          children: \"\\u70B9\\u51FB\\u6216\\u62D6\\u62FD\\u6587\\u4EF6\\u5230\\u6B64\\u533A\\u57DF\\u4E0A\\u4F20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-hint\",\n          children: \"\\u652F\\u6301\\u5355\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\uFF0C\\u6587\\u4EF6\\u5927\\u5C0F\\u4E0D\\u80FD\\u8D85\\u8FC7\\u7CFB\\u7EDF\\u9650\\u5236\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 614,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\",\n      open: folderModalVisible,\n      onOk: () => folderForm.submit(),\n      onCancel: () => setFolderModalVisible(false),\n      confirmLoading: createFolderMutation.isLoading,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: folderForm,\n        layout: \"vertical\",\n        onFinish: values => createFolderMutation.mutate(values),\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"name\",\n          label: \"\\u6587\\u4EF6\\u5939\\u540D\\u79F0\",\n          rules: [{\n            required: true,\n            message: '请输入文件夹名称'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u4EF6\\u5939\\u540D\\u79F0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ShareModal, {\n      visible: shareModalVisible,\n      onCancel: handleShareModalCancel,\n      onSuccess: handleShareModalOk,\n      file: selectedFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 502,\n    columnNumber: 5\n  }, this);\n};\n_s(Files, \"zybZI1wXNVCeqFN+8Co2ZJ687cs=\", false, function () {\n  return [useParams, useNavigate, useQueryClient, Form.useForm, useQuery, useQuery, useMutation, useMutation, useMutation, useMutation];\n});\n_c = Files;\nexport default Files;\nvar _c;\n$RefreshReg$(_c, \"Files\");","map":{"version":3,"names":["React","useState","useEffect","Card","Button","Table","Modal","Form","Input","Upload","message","Space","Popconfirm","Tag","Typography","Row","Col","Tooltip","List","Avatar","UploadOutlined","FolderAddOutlined","DeleteOutlined","ShareAltOutlined","FileOutlined","FolderOutlined","ArrowLeftOutlined","CloudDownloadOutlined","useParams","useNavigate","useQuery","useMutation","useQueryClient","api","ShareModal","jsxDEV","_jsxDEV","Title","Text","Dragger","Files","_s","folderId","navigate","queryClient","uploadModalVisible","setUploadModalVisible","folderModalVisible","setFolderModalVisible","folderForm","useForm","isMobile","setIsMobile","checkMobile","window","innerWidth","addEventListener","removeEventListener","data","folders","get","params","parent_id","then","res","filesData","isLoading","folder_id","refetchOnWindowFocus","uploadMutation","fileObj","FormData","append","post","headers","onSuccess","success","invalidateQueries","onError","error","_error$response","_error$response$data","_error$response2","console","errorMsg","response","status","localStorage","removeItem","location","href","createFolderMutation","resetFields","_error$response3","_error$response3$data","deleteFileMutation","fileId","delete","_error$response4","_error$response4$data","downloadFile","file","loading","id","download_url","filename","method","destroy","downloadResponse","responseType","blob","Blob","type","mime_type","url","URL","createObjectURL","link","document","createElement","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","original_name","streamError","_error$response5","_error$response5$data","deleteFolderMutation","_error$response6","_error$response6$data","uploadProps","name","multiple","customRequest","mutate","showUploadList","folderColumns","title","dataIndex","key","render","text","record","children","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","height","Date","toLocaleString","_","onConfirm","okText","cancelText","danger","icon","size","fileColumns","getFileIconColor","file_extension","ellipsis","maxWidth","handleShareFile","extension","colorMap","shareModalVisible","setShareModalVisible","selectedFile","setSelectedFile","handleShareModalOk","handleShareModalCancel","MobileFolderItem","folder","Item","borderBottom","cursor","actions","Meta","avatar","backgroundColor","description","children_count","files_count","MobileFileItem","direction","size_display","file_type","created_at","marginBottom","justifyContent","alignItems","flexDirection","gap","width","level","margin","className","length","dataSource","renderItem","results","pagination","count","total","pageSize","showSizeChanger","showQuickJumper","simple","gutter","span","columns","rowKey","open","onCancel","footer","onOk","submit","confirmLoading","form","layout","onFinish","values","label","rules","required","placeholder","visible","_c","$RefreshReg$"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/Files.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { \r\n  Card, \r\n  Button, \r\n  Table, \r\n  Modal, \r\n  Form, \r\n  Input, \r\n  Upload, \r\n  message,\r\n  Space,\r\n  Popconfirm,\r\n  Tag,\r\n  Typography,\r\n  Row,\r\n  Col,\r\n  Tooltip,\r\n  List,\r\n  Avatar\r\n} from 'antd';\r\nimport { \r\n  UploadOutlined, \r\n  FolderAddOutlined, \r\n  DeleteOutlined,\r\n  ShareAltOutlined,\r\n  FileOutlined,\r\n  FolderOutlined,\r\n  ArrowLeftOutlined,\r\n  CloudDownloadOutlined\r\n} from '@ant-design/icons';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport api from '../services/api';\r\nimport ShareModal from '../components/ShareModal';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Dragger } = Upload;\r\n\r\nconst Files = () => {\r\n  const { folderId } = useParams();\r\n  const navigate = useNavigate();\r\n  const queryClient = useQueryClient();\r\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\r\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\r\n  const [folderForm] = Form.useForm();\r\n  const [isMobile, setIsMobile] = useState(false);\r\n\r\n  // 检测移动设备\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    return () => window.removeEventListener('resize', checkMobile);\r\n  }, []);\r\n\r\n  const { data: folders = [] } = useQuery(\r\n    ['folders', folderId],\r\n    () => api.get('/api/files/folders/', { \r\n      params: folderId ? { parent_id: folderId } : {} \r\n    }).then(res => res.data)\r\n  );\r\n\r\n  const { data: filesData, isLoading } = useQuery(\r\n    ['files', folderId],\r\n    () => api.get('/api/files/', { \r\n      params: folderId ? { folder_id: folderId } : {} \r\n    }).then(res => res.data),\r\n    { refetchOnWindowFocus: false }\r\n  );\r\n\r\n  const uploadMutation = useMutation(\r\n    (fileObj) => {\r\n      const data = new FormData();\r\n      data.append('file', fileObj);\r\n      if (folderId) {\r\n        data.append('folder_id', folderId);\r\n      }\r\n      // 明确设置Content-Type为multipart/form-data\r\n      return api.post('/api/files/upload/', data, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        message.success('文件上传成功！');\r\n        setUploadModalVisible(false);\r\n        queryClient.invalidateQueries('files');\r\n        queryClient.invalidateQueries('storage-info');\r\n      },\r\n      onError: (error) => {\r\n        console.error('Upload error:', error);\r\n        const errorMsg = error.response?.data?.error || error.message || '上传失败';\r\n        message.error(`上传失败: ${errorMsg}`);\r\n        \r\n        // 如果是认证错误，重定向到登录页\r\n        if (error.response?.status === 401) {\r\n          localStorage.removeItem('token');\r\n          window.location.href = '/login';\r\n        }\r\n      }\r\n    }\r\n  );\r\n\r\n  const createFolderMutation = useMutation(\r\n    (data) => api.post('/api/files/folders/create/', {\r\n      ...data,\r\n      parent_id: folderId\r\n    }),\r\n    {\r\n      onSuccess: () => {\r\n        message.success('文件夹创建成功！');\r\n        setFolderModalVisible(false);\r\n        folderForm.resetFields();\r\n        queryClient.invalidateQueries('folders');\r\n      },\r\n      onError: (error) => {\r\n        const errorMsg = error.response?.data?.error || '创建失败';\r\n        message.error(errorMsg);\r\n      }\r\n    }\r\n  );\r\n\r\n  const deleteFileMutation = useMutation(\r\n    (fileId) => api.delete(`/api/files/${fileId}/delete/`),\r\n    {\r\n      onSuccess: () => {\r\n        message.success('文件删除成功！');\r\n        queryClient.invalidateQueries('files');\r\n        queryClient.invalidateQueries('storage-info');\r\n      },\r\n      onError: (error) => {\r\n        const errorMsg = error.response?.data?.error || '删除失败';\r\n        message.error(errorMsg);\r\n      }\r\n    }\r\n  );\r\n\r\n  const downloadFile = async (file) => {\r\n    try {\r\n      message.loading('正在准备下载...', 0);\r\n      \r\n      // 方式1: 获取下载URL\r\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\r\n      const { download_url, filename, method } = response.data;\r\n      \r\n      if (method === 'direct') {\r\n        // 直接下载API\r\n        message.destroy();\r\n        message.loading('正在下载文件...', 0);\r\n        \r\n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\r\n          responseType: 'blob'\r\n        });\r\n        \r\n        // 创建Blob URL\r\n        const blob = new Blob([downloadResponse.data], { type: file.mime_type });\r\n        const url = window.URL.createObjectURL(blob);\r\n        \r\n        // 创建隐藏的a标签进行下载\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = filename;\r\n        link.style.display = 'none';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        \r\n        // 清理URL对象\r\n        window.URL.revokeObjectURL(url);\r\n        \r\n        message.destroy();\r\n        message.success('文件下载完成！');\r\n      } else {\r\n        // Swift临时URL下载\r\n        // 创建隐藏的a标签进行下载\r\n        const link = document.createElement('a');\r\n        link.href = download_url;\r\n        link.download = filename;\r\n        link.style.display = 'none';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        \r\n        message.destroy();\r\n        message.success('文件下载开始！');\r\n      }\r\n    } catch (error) {\r\n      message.destroy();\r\n      \r\n      // 如果URL下载失败，尝试直接流式下载\r\n      try {\r\n        message.loading('正在下载文件...', 0);\r\n        \r\n        const response = await api.get(`/api/files/${file.id}/download/`, {\r\n          responseType: 'blob'\r\n        });\r\n        \r\n        // 创建Blob URL\r\n        const blob = new Blob([response.data], { type: file.mime_type });\r\n        const url = window.URL.createObjectURL(blob);\r\n        \r\n        // 创建隐藏的a标签进行下载\r\n        const link = document.createElement('a');\r\n        link.href = url;\r\n        link.download = file.original_name;\r\n        link.style.display = 'none';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        \r\n        // 清理URL对象\r\n        window.URL.revokeObjectURL(url);\r\n        \r\n        message.destroy();\r\n        message.success('文件下载完成！');\r\n      } catch (streamError) {\r\n        message.destroy();\r\n        const errorMsg = error.response?.data?.error || streamError.message || '下载失败';\r\n        message.error(`下载失败: ${errorMsg}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  const deleteFolderMutation = useMutation(\r\n    (folderId) => api.delete(`/api/files/folders/${folderId}/delete/`),\r\n    {\r\n      onSuccess: () => {\r\n        message.success('文件夹删除成功！');\r\n        queryClient.invalidateQueries('folders');\r\n      },\r\n      onError: (error) => {\r\n        const errorMsg = error.response?.data?.error || '删除失败';\r\n        message.error(errorMsg);\r\n      }\r\n    }\r\n  );\r\n\r\n  const uploadProps = {\r\n    name: 'file',\r\n    multiple: false,\r\n    customRequest: ({ file, onSuccess, onError }) => {\r\n      uploadMutation.mutate(file, {\r\n        onSuccess: () => onSuccess(),\r\n        onError: (error) => onError(error)\r\n      });\r\n    },\r\n    showUploadList: false,\r\n  };\r\n\r\n  const folderColumns = [\r\n    {\r\n      title: '名称',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Space>\r\n          <FolderOutlined style={{ color: '#fa709a', fontSize: '18px' }} />\r\n          <Button \r\n            type=\"link\" \r\n            onClick={() => navigate(`/files/${record.id}`)}\r\n            style={{ padding: 0, height: 'auto' }}\r\n          >\r\n            {text}\r\n          </Button>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: '文件数量',\r\n      dataIndex: 'files_count',\r\n      key: 'files_count',\r\n    },\r\n    {\r\n      title: '创建时间',\r\n      dataIndex: 'created_at',\r\n      key: 'created_at',\r\n      render: (text) => new Date(text).toLocaleString(),\r\n    },\r\n    {\r\n      title: '操作',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Popconfirm\r\n            title=\"确定删除这个文件夹吗？\"\r\n            onConfirm={() => deleteFolderMutation.mutate(record.id)}\r\n            okText=\"确定\"\r\n            cancelText=\"取消\"\r\n          >\r\n            <Button \r\n              type=\"text\" \r\n              danger \r\n              icon={<DeleteOutlined />}\r\n              size=\"small\"\r\n            />\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const fileColumns = [\r\n    {\r\n      title: '名称',\r\n      dataIndex: 'name',\r\n      key: 'name',\r\n      render: (text, record) => (\r\n        <Space>\r\n          <FileOutlined style={{ \r\n            color: getFileIconColor(record.file_extension),\r\n            fontSize: '18px' \r\n          }} />\r\n          <Tooltip title={record.original_name}>\r\n            <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\r\n          </Tooltip>\r\n        </Space>\r\n      ),\r\n    },\r\n    {\r\n      title: '大小',\r\n      dataIndex: 'size_display',\r\n      key: 'size_display',\r\n    },\r\n    {\r\n      title: '类型',\r\n      dataIndex: 'file_type',\r\n      key: 'file_type',\r\n      render: (type) => (\r\n        <Tag color=\"blue\">{type || '未知'}</Tag>\r\n      ),\r\n    },\r\n    {\r\n      title: '上传时间',\r\n      dataIndex: 'created_at',\r\n      key: 'created_at',\r\n      render: (text) => new Date(text).toLocaleString(),\r\n    },\r\n    {\r\n      title: '操作',\r\n      key: 'actions',\r\n      render: (_, record) => (\r\n        <Space>\r\n          <Tooltip title=\"下载文件\">\r\n            <Button \r\n              type=\"text\" \r\n              icon={<CloudDownloadOutlined />}\r\n              size=\"small\"\r\n              onClick={() => downloadFile(record)}\r\n            />\r\n          </Tooltip>\r\n          <Tooltip title=\"分享文件\">\r\n            <Button \r\n              type=\"text\" \r\n              icon={<ShareAltOutlined />}\r\n              size=\"small\"\r\n              onClick={() => handleShareFile(record)}\r\n            />\r\n          </Tooltip>\r\n          <Popconfirm\r\n            title=\"确定删除这个文件吗？\"\r\n            onConfirm={() => deleteFileMutation.mutate(record.id)}\r\n            okText=\"确定\"\r\n            cancelText=\"取消\"\r\n          >\r\n            <Tooltip title=\"删除文件\">\r\n              <Button \r\n                type=\"text\" \r\n                danger \r\n                icon={<DeleteOutlined />}\r\n                size=\"small\"\r\n              />\r\n            </Tooltip>\r\n          </Popconfirm>\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const getFileIconColor = (extension) => {\r\n    const colorMap = {\r\n      '.pdf': '#ff6b6b',\r\n      '.doc': '#4facfe',\r\n      '.xls': '#43e97b',\r\n      '.jpg': '#fa709a',\r\n      '.png': '#fee140',\r\n      '.mp4': '#30cfd0',\r\n      '.mp3': '#a8edea',\r\n      '.zip': '#ff9a9e',\r\n    };\r\n    return colorMap[extension] || '#667eea';\r\n  };\r\n\r\n  const [shareModalVisible, setShareModalVisible] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  const handleShareFile = (file) => {\r\n    setSelectedFile(file);\r\n    setShareModalVisible(true);\r\n  };\r\n\r\n  const handleShareModalOk = () => {\r\n    setShareModalVisible(false);\r\n    setSelectedFile(null);\r\n    queryClient.invalidateQueries('my-shares');\r\n  };\r\n\r\n  const handleShareModalCancel = () => {\r\n    setShareModalVisible(false);\r\n    setSelectedFile(null);\r\n  };\r\n\r\n  // 移动端文件夹列表项\r\n  const MobileFolderItem = ({ folder }) => (\r\n    <List.Item\r\n      style={{ \r\n        padding: '12px 0',\r\n        borderBottom: '1px solid #f0f0f0',\r\n        cursor: 'pointer'\r\n      }}\r\n      onClick={() => navigate(`/files/${folder.id}`)}\r\n      actions={[\r\n        <Popconfirm\r\n          key=\"delete\"\r\n          title=\"确定删除这个文件夹吗？\"\r\n          onConfirm={() => deleteFolderMutation.mutate(folder.id)}\r\n          okText=\"确定\"\r\n          cancelText=\"取消\"\r\n        >\r\n          <Button type=\"text\" danger size=\"small\" icon={<DeleteOutlined />} />\r\n        </Popconfirm>\r\n      ]}\r\n    >\r\n      <List.Item.Meta\r\n        avatar={<Avatar icon={<FolderOutlined />} style={{ backgroundColor: '#fa709a' }} />}\r\n        title={folder.name}\r\n        description={`${folder.children_count} 个子文件夹, ${folder.files_count} 个文件`}\r\n      />\r\n    </List.Item>\r\n  );\r\n\r\n  // 移动端文件列表项\r\n  const MobileFileItem = ({ file }) => (\r\n    <List.Item\r\n      style={{ padding: '12px 0', borderBottom: '1px solid #f0f0f0' }}\r\n      actions={[\r\n        <Button \r\n          key=\"download\"\r\n          type=\"text\" \r\n          size=\"small\" \r\n          icon={<CloudDownloadOutlined />}\r\n          onClick={() => downloadFile(file)}\r\n        />,\r\n        <Button \r\n          key=\"share\"\r\n          type=\"text\" \r\n          size=\"small\" \r\n          icon={<ShareAltOutlined />}\r\n          onClick={() => handleShareFile(file)}\r\n        />,\r\n        <Popconfirm\r\n          key=\"delete\"\r\n          title=\"确定删除这个文件吗？\"\r\n          onConfirm={() => deleteFileMutation.mutate(file.id)}\r\n          okText=\"确定\"\r\n          cancelText=\"取消\"\r\n        >\r\n          <Button type=\"text\" danger size=\"small\" icon={<DeleteOutlined />} />\r\n        </Popconfirm>\r\n      ]}\r\n    >\r\n      <List.Item.Meta\r\n        avatar={\r\n          <Avatar \r\n            icon={<FileOutlined />} \r\n            style={{ backgroundColor: getFileIconColor(file.file_extension) }} \r\n          />\r\n        }\r\n        title={\r\n          <Tooltip title={file.original_name}>\r\n            <Text ellipsis style={{ maxWidth: '200px' }}>{file.name}</Text>\r\n          </Tooltip>\r\n        }\r\n        description={\r\n          <Space direction=\"vertical\" size=\"small\">\r\n            <Text type=\"secondary\">{file.size_display}</Text>\r\n            <Tag color=\"blue\" size=\"small\">{file.file_type || '未知'}</Tag>\r\n            <Text type=\"secondary\" style={{ fontSize: '12px' }}>\r\n              {new Date(file.created_at).toLocaleString()}\r\n            </Text>\r\n          </Space>\r\n        }\r\n      />\r\n    </List.Item>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <div style={{ \r\n        marginBottom: isMobile ? '16px' : '24px', \r\n        display: 'flex', \r\n        justifyContent: 'space-between', \r\n        alignItems: 'center',\r\n        flexDirection: isMobile ? 'column' : 'row',\r\n        gap: isMobile ? '12px' : '0'\r\n      }}>\r\n        <Space direction={isMobile ? 'vertical' : 'horizontal'} style={{ width: isMobile ? '100%' : 'auto' }}>\r\n          {folderId && (\r\n            <Button \r\n              icon={<ArrowLeftOutlined />} \r\n              onClick={() => navigate('/files')}\r\n              style={{ width: isMobile ? '100%' : 'auto' }}\r\n            >\r\n              返回上级\r\n            </Button>\r\n          )}\r\n          <Title level={isMobile ? 4 : 2} style={{ color: '#333', margin: 0 }}>\r\n            我的文件\r\n          </Title>\r\n        </Space>\r\n        \r\n        <Space direction={isMobile ? 'vertical' : 'horizontal'} style={{ width: isMobile ? '100%' : 'auto' }}>\r\n          <Button \r\n            type=\"primary\" \r\n            icon={<UploadOutlined />}\r\n            onClick={() => setUploadModalVisible(true)}\r\n            className=\"cel-button\"\r\n            style={{ width: isMobile ? '100%' : 'auto' }}\r\n          >\r\n            上传文件\r\n          </Button>\r\n          <Button \r\n            icon={<FolderAddOutlined />}\r\n            onClick={() => setFolderModalVisible(true)}\r\n            className=\"cel-button\"\r\n            style={{ width: isMobile ? '100%' : 'auto' }}\r\n          >\r\n            新建文件夹\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n\r\n      {isMobile ? (\r\n        // 移动端视图\r\n        <Space direction=\"vertical\" style={{ width: '100%' }} size=\"large\">\r\n          {folders.length > 0 && (\r\n            <Card className=\"cel-card\" title=\"文件夹\" size=\"small\">\r\n              <List\r\n                dataSource={folders}\r\n                renderItem={MobileFolderItem}\r\n                size=\"small\"\r\n              />\r\n            </Card>\r\n          )}\r\n          \r\n          <Card className=\"cel-card\" title=\"文件\" size=\"small\">\r\n            <List\r\n              dataSource={filesData?.results || filesData || []}\r\n              renderItem={MobileFileItem}\r\n              loading={isLoading}\r\n              size=\"small\"\r\n              pagination={\r\n                filesData?.count > 20 ? {\r\n                  total: filesData?.count,\r\n                  pageSize: 20,\r\n                  showSizeChanger: false,\r\n                  showQuickJumper: false,\r\n                  simple: true,\r\n                } : false\r\n              }\r\n            />\r\n          </Card>\r\n        </Space>\r\n      ) : (\r\n        // 桌面端视图\r\n        <Row gutter={[24, 24]}>\r\n          <Col span={24}>\r\n            <Card className=\"cel-card\" title=\"文件夹\">\r\n              <Table\r\n                columns={folderColumns}\r\n                dataSource={folders}\r\n                rowKey=\"id\"\r\n                pagination={false}\r\n                size=\"small\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n\r\n          <Col span={24}>\r\n            <Card className=\"cel-card\" title=\"文件\">\r\n              <Table\r\n                columns={fileColumns}\r\n                dataSource={filesData?.results || filesData || []}\r\n                rowKey=\"id\"\r\n                loading={isLoading}\r\n                pagination={{\r\n                  total: filesData?.count,\r\n                  pageSize: 20,\r\n                  showSizeChanger: false,\r\n                  showQuickJumper: true,\r\n                }}\r\n                size=\"small\"\r\n              />\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      )}\r\n\r\n      {/* 上传文件模态框 */}\r\n      <Modal\r\n        title=\"上传文件\"\r\n        open={uploadModalVisible}\r\n        onCancel={() => setUploadModalVisible(false)}\r\n        footer={null}\r\n        width={600}\r\n      >\r\n        <Dragger {...uploadProps}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <UploadOutlined style={{ fontSize: '48px', color: '#667eea' }} />\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或拖拽文件到此区域上传</p>\r\n          <p className=\"ant-upload-hint\">\r\n            支持单个文件上传，文件大小不能超过系统限制\r\n          </p>\r\n        </Dragger>\r\n      </Modal>\r\n\r\n      {/* 创建文件夹模态框 */}\r\n      <Modal\r\n        title=\"新建文件夹\"\r\n        open={folderModalVisible}\r\n        onOk={() => folderForm.submit()}\r\n        onCancel={() => setFolderModalVisible(false)}\r\n        confirmLoading={createFolderMutation.isLoading}\r\n      >\r\n        <Form\r\n          form={folderForm}\r\n          layout=\"vertical\"\r\n          onFinish={(values) => createFolderMutation.mutate(values)}\r\n        >\r\n          <Form.Item\r\n            name=\"name\"\r\n            label=\"文件夹名称\"\r\n            rules={[{ required: true, message: '请输入文件夹名称' }]}\r\n          >\r\n            <Input placeholder=\"请输入文件夹名称\" />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n\r\n      {/* 分享模态框 */}\r\n      <ShareModal\r\n        visible={shareModalVisible}\r\n        onCancel={handleShareModalCancel}\r\n        onSuccess={handleShareModalOk}\r\n        file={selectedFile}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Files;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}