{"ast":null,"code":"var _jsxFileName = \"D:\\\\cloud-storage-system\\\\cloud-storage-system\\\\frontend\\\\src\\\\pages\\\\Files.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Card, Button, Table, Modal, Form, Input, Upload, message, Space, Popconfirm, Tag, Typography, Row, Col, Tooltip } from 'antd';\nimport { UploadOutlined, FolderAddOutlined, DeleteOutlined, ShareAltOutlined, FileOutlined, FolderOutlined, ArrowLeftOutlined, CloudDownloadOutlined } from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title,\n  Text\n} = Typography;\nconst {\n  Dragger\n} = Upload;\nconst Files = () => {\n  _s();\n  const {\n    folderId\n  } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n  const {\n    data: folders = []\n  } = useQuery(['folders', folderId], () => api.get('/api/files/folders/', {\n    params: folderId ? {\n      parent_id: folderId\n    } : {}\n  }).then(res => res.data));\n  const {\n    data: filesData,\n    isLoading\n  } = useQuery(['files', folderId], () => api.get('/api/files/', {\n    params: folderId ? {\n      folder_id: folderId\n    } : {}\n  }).then(res => res.data), {\n    refetchOnWindowFocus: false\n  });\n  const uploadMutation = useMutation(fileObj => {\n    const data = new FormData();\n    data.append('file', fileObj);\n    if (folderId) {\n      data.append('folder_id', folderId);\n    }\n    // 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\n    return api.post('/api/files/upload/', data, {\n      headers: {\n        'Content-Type': undefined\n      }\n    });\n  }, {\n    onSuccess: () => {\n      message.success('文件上传成功！');\n      setUploadModalVisible(false);\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || '上传失败';\n      message.error(errorMsg);\n    }\n  });\n  const createFolderMutation = useMutation(data => api.post('/api/files/folders/create/', {\n    ...data,\n    parent_id: folderId\n  }), {\n    onSuccess: () => {\n      message.success('文件夹创建成功！');\n      setFolderModalVisible(false);\n      folderForm.resetFields();\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response2, _error$response2$data;\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || '创建失败';\n      message.error(errorMsg);\n    }\n  });\n  const deleteFileMutation = useMutation(fileId => api.delete(`/api/files/${fileId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件删除成功！');\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response3, _error$response3$data;\n      const errorMsg = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const downloadFile = async file => {\n    try {\n      message.loading('正在准备下载...', 0);\n\n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const {\n        download_url,\n        filename,\n        method\n      } = response.data;\n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n\n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([response.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        var _error$response4, _error$response4$data;\n        message.destroy();\n        const errorMsg = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n  const deleteFolderMutation = useMutation(folderId => api.delete(`/api/files/folders/${folderId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件夹删除成功！');\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response5, _error$response5$data;\n      const errorMsg = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({\n      file,\n      onSuccess,\n      onError\n    }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: error => onError(error)\n      });\n    },\n    showUploadList: false\n  };\n  const folderColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FolderOutlined, {\n        style: {\n          color: '#fa709a',\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        onClick: () => navigate(`/files/${record.id}`),\n        style: {\n          padding: 0,\n          height: 'auto'\n        },\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '文件数量',\n    dataIndex: 'files_count',\n    key: 'files_count'\n  }, {\n    title: '创建时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u5417\\uFF1F\",\n        onConfirm: () => deleteFolderMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          danger: true,\n          icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 21\n          }, this),\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 9\n    }, this)\n  }];\n  const fileColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FileOutlined, {\n        style: {\n          color: getFileIconColor(record.file_extension),\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: record.original_name,\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          ellipsis: true,\n          style: {\n            maxWidth: '200px'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '大小',\n    dataIndex: 'size_display',\n    key: 'size_display'\n  }, {\n    title: '类型',\n    dataIndex: 'file_type',\n    key: 'file_type',\n    render: type => /*#__PURE__*/_jsxDEV(Tag, {\n      color: \"blue\",\n      children: type || '未知'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '上传时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u4E0B\\u8F7D\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(CloudDownloadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => downloadFile(record)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u5206\\u4EAB\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => handleShareFile(record.id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\",\n        onConfirm: () => deleteFileMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u5220\\u9664\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            danger: true,\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 23\n            }, this),\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 9\n    }, this)\n  }];\n  const getFileIconColor = extension => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e'\n    };\n    return colorMap[extension] || '#667eea';\n  };\n  const handleShareFile = fileId => {\n    Modal.confirm({\n      title: '创建文件分享',\n      content: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u786E\\u5B9A\\u8981\\u5206\\u4EAB\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#666',\n            fontSize: '12px'\n          },\n          children: \"\\u5206\\u4EAB\\u540E\\uFF0C\\u4EFB\\u4F55\\u4EBA\\u90FD\\u53EF\\u4EE5\\u901A\\u8FC7\\u94FE\\u63A5\\u4E0B\\u8F7D\\u6B64\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this),\n      okText: '确认分享',\n      cancelText: '取消',\n      onOk: async () => {\n        try {\n          await api.post(`/api/files/${fileId}/share/`);\n          message.success('分享创建成功！');\n          queryClient.invalidateQueries('my-shares');\n        } catch (error) {\n          var _error$response6, _error$response6$data;\n          message.error(((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || '分享创建失败');\n        }\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '24px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Space, {\n        children: [folderId && /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 21\n          }, this),\n          onClick: () => navigate('/files'),\n          children: \"\\u8FD4\\u56DE\\u4E0A\\u7EA7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Title, {\n          level: 2,\n          style: {\n            color: '#333',\n            margin: 0\n          },\n          children: \"\\u6211\\u7684\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 19\n          }, this),\n          onClick: () => setUploadModalVisible(true),\n          className: \"cel-button\",\n          children: \"\\u4E0A\\u4F20\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(FolderAddOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 19\n          }, this),\n          onClick: () => setFolderModalVisible(true),\n          className: \"cel-button\",\n          children: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      gutter: [24, 24],\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\\u5939\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: folderColumns,\n            dataSource: folders,\n            rowKey: \"id\",\n            pagination: false,\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: fileColumns,\n            dataSource: (filesData === null || filesData === void 0 ? void 0 : filesData.results) || filesData || [],\n            rowKey: \"id\",\n            loading: isLoading,\n            pagination: {\n              total: filesData === null || filesData === void 0 ? void 0 : filesData.count,\n              pageSize: 20,\n              showSizeChanger: false,\n              showQuickJumper: true\n            },\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u4E0A\\u4F20\\u6587\\u4EF6\",\n      open: uploadModalVisible,\n      onCancel: () => setUploadModalVisible(false),\n      footer: null,\n      width: 600,\n      children: /*#__PURE__*/_jsxDEV(Dragger, {\n        ...uploadProps,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-drag-icon\",\n          children: /*#__PURE__*/_jsxDEV(UploadOutlined, {\n            style: {\n              fontSize: '48px',\n              color: '#667eea'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-text\",\n          children: \"\\u70B9\\u51FB\\u6216\\u62D6\\u62FD\\u6587\\u4EF6\\u5230\\u6B64\\u533A\\u57DF\\u4E0A\\u4F20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-hint\",\n          children: \"\\u652F\\u6301\\u5355\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\uFF0C\\u6587\\u4EF6\\u5927\\u5C0F\\u4E0D\\u80FD\\u8D85\\u8FC7\\u7CFB\\u7EDF\\u9650\\u5236\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\",\n      open: folderModalVisible,\n      onOk: () => folderForm.submit(),\n      onCancel: () => setFolderModalVisible(false),\n      confirmLoading: createFolderMutation.isLoading,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: folderForm,\n        layout: \"vertical\",\n        onFinish: values => createFolderMutation.mutate(values),\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"name\",\n          label: \"\\u6587\\u4EF6\\u5939\\u540D\\u79F0\",\n          rules: [{\n            required: true,\n            message: '请输入文件夹名称'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u4EF6\\u5939\\u540D\\u79F0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 497,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n};\n_s(Files, \"2g7pgLgVqsmCk0rOO8RKYSSoAKQ=\", false, function () {\n  return [useParams, useNavigate, useQueryClient, Form.useForm, useQuery, useQuery, useMutation, useMutation, useMutation, useMutation];\n});\n_c = Files;\nexport default Files;\nvar _c;\n$RefreshReg$(_c, \"Files\");","map":{"version":3,"names":["React","useState","Card","Button","Table","Modal","Form","Input","Upload","message","Space","Popconfirm","Tag","Typography","Row","Col","Tooltip","UploadOutlined","FolderAddOutlined","DeleteOutlined","ShareAltOutlined","FileOutlined","FolderOutlined","ArrowLeftOutlined","CloudDownloadOutlined","useParams","useNavigate","useQuery","useMutation","useQueryClient","api","ShareModal","jsxDEV","_jsxDEV","Title","Text","Dragger","Files","_s","folderId","navigate","queryClient","uploadModalVisible","setUploadModalVisible","folderModalVisible","setFolderModalVisible","folderForm","useForm","data","folders","get","params","parent_id","then","res","filesData","isLoading","folder_id","refetchOnWindowFocus","uploadMutation","fileObj","FormData","append","post","headers","undefined","onSuccess","success","invalidateQueries","onError","error","_error$response","_error$response$data","errorMsg","response","createFolderMutation","resetFields","_error$response2","_error$response2$data","deleteFileMutation","fileId","delete","_error$response3","_error$response3$data","downloadFile","file","loading","id","download_url","filename","method","destroy","downloadResponse","responseType","blob","Blob","type","mime_type","url","window","URL","createObjectURL","link","document","createElement","href","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","original_name","streamError","_error$response4","_error$response4$data","deleteFolderMutation","_error$response5","_error$response5$data","uploadProps","name","multiple","customRequest","mutate","showUploadList","folderColumns","title","dataIndex","key","render","text","record","children","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","height","Date","toLocaleString","_","onConfirm","okText","cancelText","danger","icon","size","fileColumns","getFileIconColor","file_extension","ellipsis","maxWidth","handleShareFile","extension","colorMap","confirm","content","onOk","_error$response6","_error$response6$data","marginBottom","justifyContent","alignItems","level","margin","className","gutter","span","columns","dataSource","rowKey","pagination","results","total","count","pageSize","showSizeChanger","showQuickJumper","open","onCancel","footer","width","submit","confirmLoading","form","layout","onFinish","values","Item","label","rules","required","placeholder","_c","$RefreshReg$"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/Files.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n  Card, \n  Button, \n  Table, \n  Modal, \n  Form, \n  Input, \n  Upload, \n  message,\n  Space,\n  Popconfirm,\n  Tag,\n  Typography,\n  Row,\n  Col,\n  Tooltip\n} from 'antd';\nimport { \n  UploadOutlined, \n  FolderAddOutlined, \n  DeleteOutlined,\n  ShareAltOutlined,\n  FileOutlined,\n  FolderOutlined,\n  ArrowLeftOutlined,\n  CloudDownloadOutlined\n} from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\n\nconst { Title, Text } = Typography;\nconst { Dragger } = Upload;\n\nconst Files = () => {\n  const { folderId } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n\n  const { data: folders = [] } = useQuery(\n    ['folders', folderId],\n    () => api.get('/api/files/folders/', { \n      params: folderId ? { parent_id: folderId } : {} \n    }).then(res => res.data)\n  );\n\n  const { data: filesData, isLoading } = useQuery(\n    ['files', folderId],\n    () => api.get('/api/files/', { \n      params: folderId ? { folder_id: folderId } : {} \n    }).then(res => res.data),\n    { refetchOnWindowFocus: false }\n  );\n\n  const uploadMutation = useMutation(\n    (fileObj) => {\n      const data = new FormData();\n      data.append('file', fileObj);\n      if (folderId) {\n        data.append('folder_id', folderId);\n      }\n      // 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\n      return api.post('/api/files/upload/', data, {\n        headers: {\n          'Content-Type': undefined,\n        },\n      });\n    },\n    {\n      onSuccess: () => {\n        message.success('文件上传成功！');\n        setUploadModalVisible(false);\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '上传失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const createFolderMutation = useMutation(\n    (data) => api.post('/api/files/folders/create/', {\n      ...data,\n      parent_id: folderId\n    }),\n    {\n      onSuccess: () => {\n        message.success('文件夹创建成功！');\n        setFolderModalVisible(false);\n        folderForm.resetFields();\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '创建失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const deleteFileMutation = useMutation(\n    (fileId) => api.delete(`/api/files/${fileId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件删除成功！');\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const downloadFile = async (file) => {\n    try {\n      message.loading('正在准备下载...', 0);\n      \n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const { download_url, filename, method } = response.data;\n      \n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        \n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n      \n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        \n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([response.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        message.destroy();\n        const errorMsg = error.response?.data?.error || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n\n  const deleteFolderMutation = useMutation(\n    (folderId) => api.delete(`/api/files/folders/${folderId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件夹删除成功！');\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({ file, onSuccess, onError }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: (error) => onError(error)\n      });\n    },\n    showUploadList: false,\n  };\n\n  const folderColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FolderOutlined style={{ color: '#fa709a', fontSize: '18px' }} />\n          <Button \n            type=\"link\" \n            onClick={() => navigate(`/files/${record.id}`)}\n            style={{ padding: 0, height: 'auto' }}\n          >\n            {text}\n          </Button>\n        </Space>\n      ),\n    },\n    {\n      title: '文件数量',\n      dataIndex: 'files_count',\n      key: 'files_count',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Popconfirm\n            title=\"确定删除这个文件夹吗？\"\n            onConfirm={() => deleteFolderMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button \n              type=\"text\" \n              danger \n              icon={<DeleteOutlined />}\n              size=\"small\"\n            />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const fileColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FileOutlined style={{ \n            color: getFileIconColor(record.file_extension),\n            fontSize: '18px' \n          }} />\n          <Tooltip title={record.original_name}>\n            <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\n          </Tooltip>\n        </Space>\n      ),\n    },\n    {\n      title: '大小',\n      dataIndex: 'size_display',\n      key: 'size_display',\n    },\n    {\n      title: '类型',\n      dataIndex: 'file_type',\n      key: 'file_type',\n      render: (type) => (\n        <Tag color=\"blue\">{type || '未知'}</Tag>\n      ),\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Tooltip title=\"下载文件\">\n            <Button \n              type=\"text\" \n              icon={<CloudDownloadOutlined />}\n              size=\"small\"\n              onClick={() => downloadFile(record)}\n            />\n          </Tooltip>\n          <Tooltip title=\"分享文件\">\n            <Button \n              type=\"text\" \n              icon={<ShareAltOutlined />}\n              size=\"small\"\n              onClick={() => handleShareFile(record.id)}\n            />\n          </Tooltip>\n          <Popconfirm\n            title=\"确定删除这个文件吗？\"\n            onConfirm={() => deleteFileMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Tooltip title=\"删除文件\">\n              <Button \n                type=\"text\" \n                danger \n                icon={<DeleteOutlined />}\n                size=\"small\"\n              />\n            </Tooltip>\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const getFileIconColor = (extension) => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e',\n    };\n    return colorMap[extension] || '#667eea';\n  };\n\n  const handleShareFile = (fileId) => {\n    Modal.confirm({\n      title: '创建文件分享',\n      content: (\n        <div>\n          <p>确定要分享这个文件吗？</p>\n          <p style={{ color: '#666', fontSize: '12px' }}>\n            分享后，任何人都可以通过链接下载此文件\n          </p>\n        </div>\n      ),\n      okText: '确认分享',\n      cancelText: '取消',\n      onOk: async () => {\n        try {\n          await api.post(`/api/files/${fileId}/share/`);\n          message.success('分享创建成功！');\n          queryClient.invalidateQueries('my-shares');\n        } catch (error) {\n          message.error(error.response?.data?.error || '分享创建失败');\n        }\n      }\n    });\n  };\n\n  return (\n    <div>\n      <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Space>\n          {folderId && (\n            <Button \n              icon={<ArrowLeftOutlined />} \n              onClick={() => navigate('/files')}\n            >\n              返回上级\n            </Button>\n          )}\n          <Title level={2} style={{ color: '#333', margin: 0 }}>\n            我的文件\n          </Title>\n        </Space>\n        \n        <Space>\n          <Button \n            type=\"primary\" \n            icon={<UploadOutlined />}\n            onClick={() => setUploadModalVisible(true)}\n            className=\"cel-button\"\n          >\n            上传文件\n          </Button>\n          <Button \n            icon={<FolderAddOutlined />}\n            onClick={() => setFolderModalVisible(true)}\n            className=\"cel-button\"\n          >\n            新建文件夹\n          </Button>\n        </Space>\n      </div>\n\n      <Row gutter={[24, 24]}>\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件夹\">\n            <Table\n              columns={folderColumns}\n              dataSource={folders}\n              rowKey=\"id\"\n              pagination={false}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件\">\n            <Table\n              columns={fileColumns}\n              dataSource={filesData?.results || filesData || []}\n              rowKey=\"id\"\n              loading={isLoading}\n              pagination={{\n                total: filesData?.count,\n                pageSize: 20,\n                showSizeChanger: false,\n                showQuickJumper: true,\n              }}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* 上传文件模态框 */}\n      <Modal\n        title=\"上传文件\"\n        open={uploadModalVisible}\n        onCancel={() => setUploadModalVisible(false)}\n        footer={null}\n        width={600}\n      >\n        <Dragger {...uploadProps}>\n          <p className=\"ant-upload-drag-icon\">\n            <UploadOutlined style={{ fontSize: '48px', color: '#667eea' }} />\n          </p>\n          <p className=\"ant-upload-text\">点击或拖拽文件到此区域上传</p>\n          <p className=\"ant-upload-hint\">\n            支持单个文件上传，文件大小不能超过系统限制\n          </p>\n        </Dragger>\n      </Modal>\n\n      {/* 创建文件夹模态框 */}\n      <Modal\n        title=\"新建文件夹\"\n        open={folderModalVisible}\n        onOk={() => folderForm.submit()}\n        onCancel={() => setFolderModalVisible(false)}\n        confirmLoading={createFolderMutation.isLoading}\n      >\n        <Form\n          form={folderForm}\n          layout=\"vertical\"\n          onFinish={(values) => createFolderMutation.mutate(values)}\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"文件夹名称\"\n            rules={[{ required: true, message: '请输入文件夹名称' }]}\n          >\n            <Input placeholder=\"请输入文件夹名称\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n    </div>\n  );\n};\n\nexport default Files;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}