{"ast":null,"code":"/**\r\n * 移动端工具函数\r\n */\n\n// 检测是否为移动设备\nexport const isMobileDevice = () => {\n  return window.innerWidth <= 768;\n};\n\n// 检测是否为触摸设备\nexport const isTouchDevice = () => {\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n};\n\n// 检测是否为iOS设备\nexport const isIOSDevice = () => {\n  return /iPad|iPhone|iPod/.test(navigator.userAgent);\n};\n\n// 检测是否为Android设备\nexport const isAndroidDevice = () => {\n  return /Android/.test(navigator.userAgent);\n};\n\n// 获取响应式断点\nexport const breakpoints = {\n  xs: 480,\n  sm: 576,\n  md: 768,\n  lg: 992,\n  xl: 1200,\n  xxl: 1600\n};\n\n// 获取当前断点\nexport const getCurrentBreakpoint = () => {\n  const width = window.innerWidth;\n  if (width < breakpoints.xs) return 'xs';\n  if (width < breakpoints.sm) return 'sm';\n  if (width < breakpoints.md) return 'md';\n  if (width < breakpoints.lg) return 'lg';\n  if (width < breakpoints.xl) return 'xl';\n  return 'xxl';\n};\n\n// 格式化文件大小为移动端友好格式\nexport const formatFileSize = bytes => {\n  if (bytes === 0) return '0 B';\n  const k = 1024;\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  const value = bytes / Math.pow(k, i);\n\n  // 移动端使用更简洁的格式\n  if (isMobileDevice()) {\n    return `${value.toFixed(i === 0 ? 0 : 1)} ${sizes[i]}`;\n  }\n  return `${value.toFixed(2)} ${sizes[i]}`;\n};\n\n// 格式化日期为移动端友好格式\nexport const formatDate = dateString => {\n  const date = new Date(dateString);\n  const now = new Date();\n  const diffTime = Math.abs(now - date);\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n  if (isMobileDevice()) {\n    if (diffDays === 0) {\n      return '今天';\n    } else if (diffDays === 1) {\n      return date > now ? '明天' : '昨天';\n    } else if (diffDays < 7) {\n      return `${diffDays}天前`;\n    } else if (diffDays < 30) {\n      return `${Math.floor(diffDays / 7)}周前`;\n    } else if (diffDays < 365) {\n      return `${Math.floor(diffDays / 30)}个月前`;\n    } else {\n      return `${Math.floor(diffDays / 365)}年前`;\n    }\n  }\n  return date.toLocaleString('zh-CN');\n};\n\n// 防抖函数\nexport const debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\n// 节流函数\nexport const throttle = (func, limit) => {\n  let inThrottle;\n  return function () {\n    const args = arguments;\n    const context = this;\n    if (!inThrottle) {\n      func.apply(context, args);\n      inThrottle = true;\n      setTimeout(() => inThrottle = false, limit);\n    }\n  };\n};\n\n// 移动端手势支持\nexport const addSwipeGesture = (element, onSwipeLeft, onSwipeRight) => {\n  let touchStartX = 0;\n  let touchEndX = 0;\n  const handleTouchStart = e => {\n    touchStartX = e.changedTouches[0].screenX;\n  };\n  const handleTouchEnd = e => {\n    touchEndX = e.changedTouches[0].screenX;\n    handleSwipe();\n  };\n  const handleSwipe = () => {\n    const swipeThreshold = 50;\n    const diff = touchStartX - touchEndX;\n    if (Math.abs(diff) > swipeThreshold) {\n      if (diff > 0) {\n        onSwipeLeft && onSwipeLeft();\n      } else {\n        onSwipeRight && onSwipeRight();\n      }\n    }\n  };\n  element.addEventListener('touchstart', handleTouchStart);\n  element.addEventListener('touchend', handleTouchEnd);\n\n  // 返回清理函数\n  return () => {\n    element.removeEventListener('touchstart', handleTouchStart);\n    element.removeEventListener('touchend', handleTouchEnd);\n  };\n};\n\n// 移动端优化配置\nexport const mobileConfig = {\n  // 表格配置\n  table: {\n    size: 'small',\n    scroll: {\n      x: true\n    },\n    pagination: {\n      simple: true,\n      showSizeChanger: false\n    }\n  },\n  // 按钮配置\n  button: {\n    size: 'middle',\n    style: {\n      height: 44,\n      borderRadius: 8\n    } // iOS推荐最小触摸目标44px\n  },\n  // 输入框配置\n  input: {\n    size: 'middle',\n    style: {\n      height: 44,\n      fontSize: 16\n    } // 防止iOS缩放\n  },\n  // 卡片配置\n  card: {\n    size: 'small',\n    style: {\n      margin: '0 8px',\n      borderRadius: 12\n    }\n  },\n  // 模态框配置\n  modal: {\n    centered: true,\n    width: '95%',\n    style: {\n      maxWidth: 400\n    }\n  }\n};","map":{"version":3,"names":["isMobileDevice","window","innerWidth","isTouchDevice","navigator","maxTouchPoints","isIOSDevice","test","userAgent","isAndroidDevice","breakpoints","xs","sm","md","lg","xl","xxl","getCurrentBreakpoint","width","formatFileSize","bytes","k","sizes","i","Math","floor","log","value","pow","toFixed","formatDate","dateString","date","Date","now","diffTime","abs","diffDays","ceil","toLocaleString","debounce","func","wait","timeout","executedFunction","args","later","clearTimeout","setTimeout","throttle","limit","inThrottle","arguments","context","apply","addSwipeGesture","element","onSwipeLeft","onSwipeRight","touchStartX","touchEndX","handleTouchStart","e","changedTouches","screenX","handleTouchEnd","handleSwipe","swipeThreshold","diff","addEventListener","removeEventListener","mobileConfig","table","size","scroll","x","pagination","simple","showSizeChanger","button","style","height","borderRadius","input","fontSize","card","margin","modal","centered","maxWidth"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/utils/mobile.js"],"sourcesContent":["/**\r\n * 移动端工具函数\r\n */\r\n\r\n// 检测是否为移动设备\r\nexport const isMobileDevice = () => {\r\n  return window.innerWidth <= 768;\r\n};\r\n\r\n// 检测是否为触摸设备\r\nexport const isTouchDevice = () => {\r\n  return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\r\n};\r\n\r\n// 检测是否为iOS设备\r\nexport const isIOSDevice = () => {\r\n  return /iPad|iPhone|iPod/.test(navigator.userAgent);\r\n};\r\n\r\n// 检测是否为Android设备\r\nexport const isAndroidDevice = () => {\r\n  return /Android/.test(navigator.userAgent);\r\n};\r\n\r\n// 获取响应式断点\r\nexport const breakpoints = {\r\n  xs: 480,\r\n  sm: 576,\r\n  md: 768,\r\n  lg: 992,\r\n  xl: 1200,\r\n  xxl: 1600,\r\n};\r\n\r\n// 获取当前断点\r\nexport const getCurrentBreakpoint = () => {\r\n  const width = window.innerWidth;\r\n  if (width < breakpoints.xs) return 'xs';\r\n  if (width < breakpoints.sm) return 'sm';\r\n  if (width < breakpoints.md) return 'md';\r\n  if (width < breakpoints.lg) return 'lg';\r\n  if (width < breakpoints.xl) return 'xl';\r\n  return 'xxl';\r\n};\r\n\r\n// 格式化文件大小为移动端友好格式\r\nexport const formatFileSize = (bytes) => {\r\n  if (bytes === 0) return '0 B';\r\n  const k = 1024;\r\n  const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n  const value = bytes / Math.pow(k, i);\r\n  \r\n  // 移动端使用更简洁的格式\r\n  if (isMobileDevice()) {\r\n    return `${value.toFixed(i === 0 ? 0 : 1)} ${sizes[i]}`;\r\n  }\r\n  \r\n  return `${value.toFixed(2)} ${sizes[i]}`;\r\n};\r\n\r\n// 格式化日期为移动端友好格式\r\nexport const formatDate = (dateString) => {\r\n  const date = new Date(dateString);\r\n  const now = new Date();\r\n  const diffTime = Math.abs(now - date);\r\n  const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n  \r\n  if (isMobileDevice()) {\r\n    if (diffDays === 0) {\r\n      return '今天';\r\n    } else if (diffDays === 1) {\r\n      return date > now ? '明天' : '昨天';\r\n    } else if (diffDays < 7) {\r\n      return `${diffDays}天前`;\r\n    } else if (diffDays < 30) {\r\n      return `${Math.floor(diffDays / 7)}周前`;\r\n    } else if (diffDays < 365) {\r\n      return `${Math.floor(diffDays / 30)}个月前`;\r\n    } else {\r\n      return `${Math.floor(diffDays / 365)}年前`;\r\n    }\r\n  }\r\n  \r\n  return date.toLocaleString('zh-CN');\r\n};\r\n\r\n// 防抖函数\r\nexport const debounce = (func, wait) => {\r\n  let timeout;\r\n  return function executedFunction(...args) {\r\n    const later = () => {\r\n      clearTimeout(timeout);\r\n      func(...args);\r\n    };\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n  };\r\n};\r\n\r\n// 节流函数\r\nexport const throttle = (func, limit) => {\r\n  let inThrottle;\r\n  return function() {\r\n    const args = arguments;\r\n    const context = this;\r\n    if (!inThrottle) {\r\n      func.apply(context, args);\r\n      inThrottle = true;\r\n      setTimeout(() => inThrottle = false, limit);\r\n    }\r\n  };\r\n};\r\n\r\n// 移动端手势支持\r\nexport const addSwipeGesture = (element, onSwipeLeft, onSwipeRight) => {\r\n  let touchStartX = 0;\r\n  let touchEndX = 0;\r\n  \r\n  const handleTouchStart = (e) => {\r\n    touchStartX = e.changedTouches[0].screenX;\r\n  };\r\n  \r\n  const handleTouchEnd = (e) => {\r\n    touchEndX = e.changedTouches[0].screenX;\r\n    handleSwipe();\r\n  };\r\n  \r\n  const handleSwipe = () => {\r\n    const swipeThreshold = 50;\r\n    const diff = touchStartX - touchEndX;\r\n    \r\n    if (Math.abs(diff) > swipeThreshold) {\r\n      if (diff > 0) {\r\n        onSwipeLeft && onSwipeLeft();\r\n      } else {\r\n        onSwipeRight && onSwipeRight();\r\n      }\r\n    }\r\n  };\r\n  \r\n  element.addEventListener('touchstart', handleTouchStart);\r\n  element.addEventListener('touchend', handleTouchEnd);\r\n  \r\n  // 返回清理函数\r\n  return () => {\r\n    element.removeEventListener('touchstart', handleTouchStart);\r\n    element.removeEventListener('touchend', handleTouchEnd);\r\n  };\r\n};\r\n\r\n// 移动端优化配置\r\nexport const mobileConfig = {\r\n  // 表格配置\r\n  table: {\r\n    size: 'small',\r\n    scroll: { x: true },\r\n    pagination: { simple: true, showSizeChanger: false },\r\n  },\r\n  \r\n  // 按钮配置\r\n  button: {\r\n    size: 'middle',\r\n    style: { height: 44, borderRadius: 8 }, // iOS推荐最小触摸目标44px\r\n  },\r\n  \r\n  // 输入框配置\r\n  input: {\r\n    size: 'middle',\r\n    style: { height: 44, fontSize: 16 }, // 防止iOS缩放\r\n  },\r\n  \r\n  // 卡片配置\r\n  card: {\r\n    size: 'small',\r\n    style: { margin: '0 8px', borderRadius: 12 },\r\n  },\r\n  \r\n  // 模态框配置\r\n  modal: {\r\n    centered: true,\r\n    width: '95%',\r\n    style: { maxWidth: 400 },\r\n  },\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}