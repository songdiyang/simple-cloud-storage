{"ast":null,"code":"var _jsxFileName = \"D:\\\\cloud-storage-system\\\\cloud-storage-system\\\\frontend\\\\src\\\\pages\\\\TestFiles.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Button, Table, message, Typography, Space } from 'antd';\nimport { FileOutlined, FolderOutlined } from '@ant-design/icons';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title\n} = Typography;\nconst TestFiles = () => {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  const fetchFiles = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/files/');\n      console.log('Files response:', response.data);\n      setFiles(response.data.results || response.data || []);\n      message.success('文件加载成功');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Files error:', error);\n      message.error('加载文件失败: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n  const columns = [{\n    title: '文件名',\n    dataIndex: 'original_name',\n    key: 'original_name',\n    render: text => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FileOutlined, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), text]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '大小',\n    dataIndex: 'size',\n    key: 'size',\n    render: size => size ? `${(size / 1024 / 1024).toFixed(2)} MB` : '-'\n  }, {\n    title: '上传时间',\n    dataIndex: 'uploaded_at',\n    key: 'uploaded_at',\n    render: time => time ? new Date(time).toLocaleString() : '-'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '24px'\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Title, {\n        level: 3,\n        children: \"\\u6211\\u7684\\u6587\\u4EF6 (\\u6D4B\\u8BD5\\u7248)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: fetchFiles,\n        loading: loading,\n        style: {\n          marginBottom: 16\n        },\n        children: \"\\u5237\\u65B0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: files,\n        rowKey: \"id\",\n        loading: loading,\n        locale: {\n          emptyText: '暂无文件'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(TestFiles, \"Lz+Rnlv+ybco4cDZeaxgieu20xw=\");\n_c = TestFiles;\nexport default TestFiles;\nvar _c;\n$RefreshReg$(_c, \"TestFiles\");","map":{"version":3,"names":["React","useState","useEffect","Card","Button","Table","message","Typography","Space","FileOutlined","FolderOutlined","api","jsxDEV","_jsxDEV","Title","TestFiles","_s","files","setFiles","loading","setLoading","fetchFiles","response","get","console","log","data","results","success","error","_error$response","_error$response$data","columns","title","dataIndex","key","render","text","children","fileName","_jsxFileName","lineNumber","columnNumber","size","toFixed","time","Date","toLocaleString","style","padding","level","onClick","marginBottom","dataSource","rowKey","locale","emptyText","_c","$RefreshReg$"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/TestFiles.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Card, Button, Table, message, Typography, Space } from 'antd';\nimport { FileOutlined, FolderOutlined } from '@ant-design/icons';\nimport api from '../services/api';\n\nconst { Title } = Typography;\n\nconst TestFiles = () => {\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n\n  const fetchFiles = async () => {\n    try {\n      setLoading(true);\n      const response = await api.get('/api/files/');\n      console.log('Files response:', response.data);\n      setFiles(response.data.results || response.data || []);\n      message.success('文件加载成功');\n    } catch (error) {\n      console.error('Files error:', error);\n      message.error('加载文件失败: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const columns = [\n    {\n      title: '文件名',\n      dataIndex: 'original_name',\n      key: 'original_name',\n      render: (text) => (\n        <Space>\n          <FileOutlined />\n          {text}\n        </Space>\n      )\n    },\n    {\n      title: '大小',\n      dataIndex: 'size',\n      key: 'size',\n      render: (size) => size ? `${(size / 1024 / 1024).toFixed(2)} MB` : '-'\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'uploaded_at',\n      key: 'uploaded_at',\n      render: (time) => time ? new Date(time).toLocaleString() : '-'\n    }\n  ];\n\n  return (\n    <div style={{ padding: '24px' }}>\n      <Card>\n        <Title level={3}>我的文件 (测试版)</Title>\n        <Button onClick={fetchFiles} loading={loading} style={{ marginBottom: 16 }}>\n          刷新\n        </Button>\n        <Table\n          columns={columns}\n          dataSource={files}\n          rowKey=\"id\"\n          loading={loading}\n          locale={{ emptyText: '暂无文件' }}\n        />\n      </Card>\n    </div>\n  );\n};\n\nexport default TestFiles;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}