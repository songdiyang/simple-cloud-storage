{"ast":null,"code":"var _jsxFileName = \"D:\\\\cloud-storage-system\\\\cloud-storage-system\\\\frontend\\\\src\\\\pages\\\\Files.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, Button, Table, Modal, Form, Input, Upload, message, Space, Popconfirm, Tag, Typography, Row, Col, Tooltip, List, Avatar } from 'antd';\nimport { UploadOutlined, FolderAddOutlined, DeleteOutlined, ShareAltOutlined, FileOutlined, FolderOutlined, ArrowLeftOutlined, CloudDownloadOutlined } from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Title,\n  Text\n} = Typography;\nconst {\n  Dragger\n} = Upload;\nconst Files = () => {\n  _s();\n  const {\n    folderId\n  } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n  const [isMobile, setIsMobile] = useState(false);\n\n  // 检测移动设备\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n  const {\n    data: folders = []\n  } = useQuery(['folders', folderId], () => api.get('/api/files/folders/', {\n    params: folderId ? {\n      parent_id: folderId\n    } : {}\n  }).then(res => res.data));\n  const {\n    data: filesData,\n    isLoading\n  } = useQuery(['files', folderId], () => api.get('/api/files/', {\n    params: folderId ? {\n      folder_id: folderId\n    } : {}\n  }).then(res => res.data), {\n    refetchOnWindowFocus: false\n  });\n  const uploadMutation = useMutation(fileObj => {\n    const data = new FormData();\n    data.append('file', fileObj);\n    if (folderId) {\n      data.append('folder_id', folderId);\n    }\n    // 明确设置Content-Type为multipart/form-data\n    return api.post('/api/files/upload/', data, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }, {\n    onSuccess: () => {\n      message.success('文件上传成功！');\n      setUploadModalVisible(false);\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response, _error$response$data, _error$response2;\n      console.error('Upload error:', error);\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message || '上传失败';\n      message.error(`上传失败: ${errorMsg}`);\n\n      // 如果是认证错误，重定向到登录页\n      if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      }\n    }\n  });\n  const createFolderMutation = useMutation(data => api.post('/api/files/folders/create/', {\n    ...data,\n    parent_id: folderId\n  }), {\n    onSuccess: () => {\n      message.success('文件夹创建成功！');\n      setFolderModalVisible(false);\n      folderForm.resetFields();\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response3, _error$response3$data;\n      const errorMsg = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || '创建失败';\n      message.error(errorMsg);\n    }\n  });\n  const deleteFileMutation = useMutation(fileId => api.delete(`/api/files/${fileId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件删除成功！');\n      queryClient.invalidateQueries('files');\n      queryClient.invalidateQueries('storage-info');\n    },\n    onError: error => {\n      var _error$response4, _error$response4$data;\n      const errorMsg = ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const downloadFile = async file => {\n    try {\n      message.loading('正在准备下载...', 0);\n\n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const {\n        download_url,\n        filename,\n        method\n      } = response.data;\n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n\n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n\n        // 创建Blob URL\n        const blob = new Blob([response.data], {\n          type: file.mime_type\n        });\n        const url = window.URL.createObjectURL(blob);\n\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n\n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        var _error$response5, _error$response5$data;\n        message.destroy();\n        const errorMsg = ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.error) || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n  const deleteFolderMutation = useMutation(folderId => api.delete(`/api/files/folders/${folderId}/delete/`), {\n    onSuccess: () => {\n      message.success('文件夹删除成功！');\n      queryClient.invalidateQueries('folders');\n    },\n    onError: error => {\n      var _error$response6, _error$response6$data;\n      const errorMsg = ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.error) || '删除失败';\n      message.error(errorMsg);\n    }\n  });\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({\n      file,\n      onSuccess,\n      onError\n    }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: error => onError(error)\n      });\n    },\n    showUploadList: false\n  };\n  const folderColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FolderOutlined, {\n        style: {\n          color: '#fa709a',\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"link\",\n        onClick: () => navigate(`/files/${record.id}`),\n        style: {\n          padding: 0,\n          height: 'auto'\n        },\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '文件数量',\n    dataIndex: 'files_count',\n    key: 'files_count'\n  }, {\n    title: '创建时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u5417\\uFF1F\",\n        onConfirm: () => deleteFolderMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          danger: true,\n          icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 21\n          }, this),\n          size: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }, this)\n  }];\n  const fileColumns = [{\n    title: '名称',\n    dataIndex: 'name',\n    key: 'name',\n    render: (text, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(FileOutlined, {\n        style: {\n          color: getFileIconColor(record.file_extension),\n          fontSize: '18px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: record.original_name,\n        children: /*#__PURE__*/_jsxDEV(Text, {\n          ellipsis: true,\n          style: {\n            maxWidth: '200px'\n          },\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '大小',\n    dataIndex: 'size_display',\n    key: 'size_display'\n  }, {\n    title: '类型',\n    dataIndex: 'file_type',\n    key: 'file_type',\n    render: type => /*#__PURE__*/_jsxDEV(Tag, {\n      color: \"blue\",\n      children: type || '未知'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 9\n    }, this)\n  }, {\n    title: '上传时间',\n    dataIndex: 'created_at',\n    key: 'created_at',\n    render: text => new Date(text).toLocaleString()\n  }, {\n    title: '操作',\n    key: 'actions',\n    render: (_, record) => /*#__PURE__*/_jsxDEV(Space, {\n      children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u4E0B\\u8F7D\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(CloudDownloadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => downloadFile(record)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: \"\\u5206\\u4EAB\\u6587\\u4EF6\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"text\",\n          icon: /*#__PURE__*/_jsxDEV(ShareAltOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 21\n          }, this),\n          size: \"small\",\n          onClick: () => handleShareFile(record)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Popconfirm, {\n        title: \"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\",\n        onConfirm: () => deleteFileMutation.mutate(record.id),\n        okText: \"\\u786E\\u5B9A\",\n        cancelText: \"\\u53D6\\u6D88\",\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          title: \"\\u5220\\u9664\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"text\",\n            danger: true,\n            icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 23\n            }, this),\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }, this)\n  }];\n  const getFileIconColor = extension => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e'\n    };\n    return colorMap[extension] || '#667eea';\n  };\n  const [shareModalVisible, setShareModalVisible] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const handleShareFile = file => {\n    setSelectedFile(file);\n    setShareModalVisible(true);\n  };\n  const handleShareModalOk = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n    queryClient.invalidateQueries('my-shares');\n  };\n  const handleShareModalCancel = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '24px',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Space, {\n        children: [folderId && /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(ArrowLeftOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 21\n          }, this),\n          onClick: () => navigate('/files'),\n          children: \"\\u8FD4\\u56DE\\u4E0A\\u7EA7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Title, {\n          level: 2,\n          style: {\n            color: '#333',\n            margin: 0\n          },\n          children: \"\\u6211\\u7684\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          icon: /*#__PURE__*/_jsxDEV(UploadOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 19\n          }, this),\n          onClick: () => setUploadModalVisible(true),\n          className: \"cel-button\",\n          children: \"\\u4E0A\\u4F20\\u6587\\u4EF6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          icon: /*#__PURE__*/_jsxDEV(FolderAddOutlined, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 19\n          }, this),\n          onClick: () => setFolderModalVisible(true),\n          className: \"cel-button\",\n          children: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      gutter: [24, 24],\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\\u5939\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: folderColumns,\n            dataSource: folders,\n            rowKey: \"id\",\n            pagination: false,\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"cel-card\",\n          title: \"\\u6587\\u4EF6\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            columns: fileColumns,\n            dataSource: (filesData === null || filesData === void 0 ? void 0 : filesData.results) || filesData || [],\n            rowKey: \"id\",\n            loading: isLoading,\n            pagination: {\n              total: filesData === null || filesData === void 0 ? void 0 : filesData.count,\n              pageSize: 20,\n              showSizeChanger: false,\n              showQuickJumper: true\n            },\n            size: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u4E0A\\u4F20\\u6587\\u4EF6\",\n      open: uploadModalVisible,\n      onCancel: () => setUploadModalVisible(false),\n      footer: null,\n      width: 600,\n      children: /*#__PURE__*/_jsxDEV(Dragger, {\n        ...uploadProps,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-drag-icon\",\n          children: /*#__PURE__*/_jsxDEV(UploadOutlined, {\n            style: {\n              fontSize: '48px',\n              color: '#667eea'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-text\",\n          children: \"\\u70B9\\u51FB\\u6216\\u62D6\\u62FD\\u6587\\u4EF6\\u5230\\u6B64\\u533A\\u57DF\\u4E0A\\u4F20\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"ant-upload-hint\",\n          children: \"\\u652F\\u6301\\u5355\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\uFF0C\\u6587\\u4EF6\\u5927\\u5C0F\\u4E0D\\u80FD\\u8D85\\u8FC7\\u7CFB\\u7EDF\\u9650\\u5236\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\",\n      open: folderModalVisible,\n      onOk: () => folderForm.submit(),\n      onCancel: () => setFolderModalVisible(false),\n      confirmLoading: createFolderMutation.isLoading,\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        form: folderForm,\n        layout: \"vertical\",\n        onFinish: values => createFolderMutation.mutate(values),\n        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n          name: \"name\",\n          label: \"\\u6587\\u4EF6\\u5939\\u540D\\u79F0\",\n          rules: [{\n            required: true,\n            message: '请输入文件夹名称'\n          }],\n          children: /*#__PURE__*/_jsxDEV(Input, {\n            placeholder: \"\\u8BF7\\u8F93\\u5165\\u6587\\u4EF6\\u5939\\u540D\\u79F0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ShareModal, {\n      visible: shareModalVisible,\n      onCancel: handleShareModalCancel,\n      onSuccess: handleShareModalOk,\n      file: selectedFile\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 418,\n    columnNumber: 5\n  }, this);\n};\n_s(Files, \"zybZI1wXNVCeqFN+8Co2ZJ687cs=\", false, function () {\n  return [useParams, useNavigate, useQueryClient, Form.useForm, useQuery, useQuery, useMutation, useMutation, useMutation, useMutation];\n});\n_c = Files;\nexport default Files;\nvar _c;\n$RefreshReg$(_c, \"Files\");","map":{"version":3,"names":["React","useState","useEffect","Card","Button","Table","Modal","Form","Input","Upload","message","Space","Popconfirm","Tag","Typography","Row","Col","Tooltip","List","Avatar","UploadOutlined","FolderAddOutlined","DeleteOutlined","ShareAltOutlined","FileOutlined","FolderOutlined","ArrowLeftOutlined","CloudDownloadOutlined","useParams","useNavigate","useQuery","useMutation","useQueryClient","api","ShareModal","jsxDEV","_jsxDEV","Title","Text","Dragger","Files","_s","folderId","navigate","queryClient","uploadModalVisible","setUploadModalVisible","folderModalVisible","setFolderModalVisible","folderForm","useForm","isMobile","setIsMobile","checkMobile","window","innerWidth","addEventListener","removeEventListener","data","folders","get","params","parent_id","then","res","filesData","isLoading","folder_id","refetchOnWindowFocus","uploadMutation","fileObj","FormData","append","post","headers","onSuccess","success","invalidateQueries","onError","error","_error$response","_error$response$data","_error$response2","console","errorMsg","response","status","localStorage","removeItem","location","href","createFolderMutation","resetFields","_error$response3","_error$response3$data","deleteFileMutation","fileId","delete","_error$response4","_error$response4$data","downloadFile","file","loading","id","download_url","filename","method","destroy","downloadResponse","responseType","blob","Blob","type","mime_type","url","URL","createObjectURL","link","document","createElement","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","original_name","streamError","_error$response5","_error$response5$data","deleteFolderMutation","_error$response6","_error$response6$data","uploadProps","name","multiple","customRequest","mutate","showUploadList","folderColumns","title","dataIndex","key","render","text","record","children","color","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","onClick","padding","height","Date","toLocaleString","_","onConfirm","okText","cancelText","danger","icon","size","fileColumns","getFileIconColor","file_extension","ellipsis","maxWidth","handleShareFile","extension","colorMap","shareModalVisible","setShareModalVisible","selectedFile","setSelectedFile","handleShareModalOk","handleShareModalCancel","marginBottom","justifyContent","alignItems","level","margin","className","gutter","span","columns","dataSource","rowKey","pagination","results","total","count","pageSize","showSizeChanger","showQuickJumper","open","onCancel","footer","width","onOk","submit","confirmLoading","form","layout","onFinish","values","Item","label","rules","required","placeholder","visible","_c","$RefreshReg$"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/Files.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  Button, \n  Table, \n  Modal, \n  Form, \n  Input, \n  Upload, \n  message,\n  Space,\n  Popconfirm,\n  Tag,\n  Typography,\n  Row,\n  Col,\n  Tooltip,\n  List,\n  Avatar\n} from 'antd';\nimport { \n  UploadOutlined, \n  FolderAddOutlined, \n  DeleteOutlined,\n  ShareAltOutlined,\n  FileOutlined,\n  FolderOutlined,\n  ArrowLeftOutlined,\n  CloudDownloadOutlined\n} from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\n\nconst { Title, Text } = Typography;\nconst { Dragger } = Upload;\n\nconst Files = () => {\n  const { folderId } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n  const [isMobile, setIsMobile] = useState(false);\n\n  // 检测移动设备\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n    \n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    return () => window.removeEventListener('resize', checkMobile);\n  }, []);\n\n  const { data: folders = [] } = useQuery(\n    ['folders', folderId],\n    () => api.get('/api/files/folders/', { \n      params: folderId ? { parent_id: folderId } : {} \n    }).then(res => res.data)\n  );\n\n  const { data: filesData, isLoading } = useQuery(\n    ['files', folderId],\n    () => api.get('/api/files/', { \n      params: folderId ? { folder_id: folderId } : {} \n    }).then(res => res.data),\n    { refetchOnWindowFocus: false }\n  );\n\n  const uploadMutation = useMutation(\n    (fileObj) => {\n      const data = new FormData();\n      data.append('file', fileObj);\n      if (folderId) {\n        data.append('folder_id', folderId);\n      }\n      // 明确设置Content-Type为multipart/form-data\n      return api.post('/api/files/upload/', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n    },\n    {\n      onSuccess: () => {\n        message.success('文件上传成功！');\n        setUploadModalVisible(false);\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        console.error('Upload error:', error);\n        const errorMsg = error.response?.data?.error || error.message || '上传失败';\n        message.error(`上传失败: ${errorMsg}`);\n        \n        // 如果是认证错误，重定向到登录页\n        if (error.response?.status === 401) {\n          localStorage.removeItem('token');\n          window.location.href = '/login';\n        }\n      }\n    }\n  );\n\n  const createFolderMutation = useMutation(\n    (data) => api.post('/api/files/folders/create/', {\n      ...data,\n      parent_id: folderId\n    }),\n    {\n      onSuccess: () => {\n        message.success('文件夹创建成功！');\n        setFolderModalVisible(false);\n        folderForm.resetFields();\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '创建失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const deleteFileMutation = useMutation(\n    (fileId) => api.delete(`/api/files/${fileId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件删除成功！');\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const downloadFile = async (file) => {\n    try {\n      message.loading('正在准备下载...', 0);\n      \n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const { download_url, filename, method } = response.data;\n      \n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        \n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n      \n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        \n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([response.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        message.destroy();\n        const errorMsg = error.response?.data?.error || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n\n  const deleteFolderMutation = useMutation(\n    (folderId) => api.delete(`/api/files/folders/${folderId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件夹删除成功！');\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({ file, onSuccess, onError }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: (error) => onError(error)\n      });\n    },\n    showUploadList: false,\n  };\n\n  const folderColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FolderOutlined style={{ color: '#fa709a', fontSize: '18px' }} />\n          <Button \n            type=\"link\" \n            onClick={() => navigate(`/files/${record.id}`)}\n            style={{ padding: 0, height: 'auto' }}\n          >\n            {text}\n          </Button>\n        </Space>\n      ),\n    },\n    {\n      title: '文件数量',\n      dataIndex: 'files_count',\n      key: 'files_count',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Popconfirm\n            title=\"确定删除这个文件夹吗？\"\n            onConfirm={() => deleteFolderMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button \n              type=\"text\" \n              danger \n              icon={<DeleteOutlined />}\n              size=\"small\"\n            />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const fileColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FileOutlined style={{ \n            color: getFileIconColor(record.file_extension),\n            fontSize: '18px' \n          }} />\n          <Tooltip title={record.original_name}>\n            <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\n          </Tooltip>\n        </Space>\n      ),\n    },\n    {\n      title: '大小',\n      dataIndex: 'size_display',\n      key: 'size_display',\n    },\n    {\n      title: '类型',\n      dataIndex: 'file_type',\n      key: 'file_type',\n      render: (type) => (\n        <Tag color=\"blue\">{type || '未知'}</Tag>\n      ),\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Tooltip title=\"下载文件\">\n            <Button \n              type=\"text\" \n              icon={<CloudDownloadOutlined />}\n              size=\"small\"\n              onClick={() => downloadFile(record)}\n            />\n          </Tooltip>\n          <Tooltip title=\"分享文件\">\n            <Button \n              type=\"text\" \n              icon={<ShareAltOutlined />}\n              size=\"small\"\n              onClick={() => handleShareFile(record)}\n            />\n          </Tooltip>\n          <Popconfirm\n            title=\"确定删除这个文件吗？\"\n            onConfirm={() => deleteFileMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Tooltip title=\"删除文件\">\n              <Button \n                type=\"text\" \n                danger \n                icon={<DeleteOutlined />}\n                size=\"small\"\n              />\n            </Tooltip>\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const getFileIconColor = (extension) => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e',\n    };\n    return colorMap[extension] || '#667eea';\n  };\n\n  const [shareModalVisible, setShareModalVisible] = useState(false);\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleShareFile = (file) => {\n    setSelectedFile(file);\n    setShareModalVisible(true);\n  };\n\n  const handleShareModalOk = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n    queryClient.invalidateQueries('my-shares');\n  };\n\n  const handleShareModalCancel = () => {\n    setShareModalVisible(false);\n    setSelectedFile(null);\n  };\n\n  return (\n    <div>\n      <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Space>\n          {folderId && (\n            <Button \n              icon={<ArrowLeftOutlined />} \n              onClick={() => navigate('/files')}\n            >\n              返回上级\n            </Button>\n          )}\n          <Title level={2} style={{ color: '#333', margin: 0 }}>\n            我的文件\n          </Title>\n        </Space>\n        \n        <Space>\n          <Button \n            type=\"primary\" \n            icon={<UploadOutlined />}\n            onClick={() => setUploadModalVisible(true)}\n            className=\"cel-button\"\n          >\n            上传文件\n          </Button>\n          <Button \n            icon={<FolderAddOutlined />}\n            onClick={() => setFolderModalVisible(true)}\n            className=\"cel-button\"\n          >\n            新建文件夹\n          </Button>\n        </Space>\n      </div>\n\n      <Row gutter={[24, 24]}>\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件夹\">\n            <Table\n              columns={folderColumns}\n              dataSource={folders}\n              rowKey=\"id\"\n              pagination={false}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件\">\n            <Table\n              columns={fileColumns}\n              dataSource={filesData?.results || filesData || []}\n              rowKey=\"id\"\n              loading={isLoading}\n              pagination={{\n                total: filesData?.count,\n                pageSize: 20,\n                showSizeChanger: false,\n                showQuickJumper: true,\n              }}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* 上传文件模态框 */}\n      <Modal\n        title=\"上传文件\"\n        open={uploadModalVisible}\n        onCancel={() => setUploadModalVisible(false)}\n        footer={null}\n        width={600}\n      >\n        <Dragger {...uploadProps}>\n          <p className=\"ant-upload-drag-icon\">\n            <UploadOutlined style={{ fontSize: '48px', color: '#667eea' }} />\n          </p>\n          <p className=\"ant-upload-text\">点击或拖拽文件到此区域上传</p>\n          <p className=\"ant-upload-hint\">\n            支持单个文件上传，文件大小不能超过系统限制\n          </p>\n        </Dragger>\n      </Modal>\n\n      {/* 创建文件夹模态框 */}\n      <Modal\n        title=\"新建文件夹\"\n        open={folderModalVisible}\n        onOk={() => folderForm.submit()}\n        onCancel={() => setFolderModalVisible(false)}\n        confirmLoading={createFolderMutation.isLoading}\n      >\n        <Form\n          form={folderForm}\n          layout=\"vertical\"\n          onFinish={(values) => createFolderMutation.mutate(values)}\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"文件夹名称\"\n            rules={[{ required: true, message: '请输入文件夹名称' }]}\n          >\n            <Input placeholder=\"请输入文件夹名称\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 分享模态框 */}\n      <ShareModal\n        visible={shareModalVisible}\n        onCancel={handleShareModalCancel}\n        onSuccess={handleShareModalOk}\n        file={selectedFile}\n      />\n    </div>\n  );\n};\n\nexport default Files;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}