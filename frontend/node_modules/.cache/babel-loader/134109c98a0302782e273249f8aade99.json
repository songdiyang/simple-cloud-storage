{"ast":null,"code":"import _objectSpread from\"D:/cloud-storage-system/cloud-storage-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{Card,Button,Input,Spin,message,Descriptions,Tag,Space,Typography,Alert}from'antd';import{DownloadOutlined,LockOutlined,FileOutlined,ClockCircleOutlined,NumberOutlined}from'@ant-design/icons';import api from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text}=Typography;const ShareView=()=>{const{shareCode}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[downloading,setDownloading]=useState(false);const[shareInfo,setShareInfo]=useState(null);const[password,setPassword]=useState('');const[passwordRequired,setPasswordRequired]=useState(false);const[error,setError]=useState('');useEffect(()=>{fetchShareInfo();},[shareCode]);const fetchShareInfo=async function(){let pwd=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';try{setLoading(true);setError('');const response=await api.get(\"/api/files/share/\".concat(shareCode,\"/\"),{params:pwd?{password:pwd}:{}});setShareInfo(response.data);setPasswordRequired(false);}catch(error){var _error$response,_error$response2,_error$response2$data,_error$response3;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===403&&((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)==='需要密码'){setPasswordRequired(true);}else if(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.status)===404){setError('分享链接不存在或已过期');}else{var _error$response4,_error$response4$data;setError(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||'获取分享信息失败');}}finally{setLoading(false);}};const handlePasswordSubmit=()=>{if(!password.trim()){message.error('请输入密码');return;}fetchShareInfo(password);};const handleDownload=async()=>{try{setDownloading(true);const response=await api.post(\"/api/files/share/\".concat(shareCode,\"/download/\"),passwordRequired?{password}:{},{responseType:'blob'});// 创建下载链接\nconst blob=new Blob([response.data]);const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;// 从响应头获取文件名\nconst contentDisposition=response.headers['content-disposition'];let filename=(shareInfo===null||shareInfo===void 0?void 0:shareInfo.file_name)||'download';if(contentDisposition){const filenameMatch=contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);if(filenameMatch&&filenameMatch[1]){filename=filenameMatch[1].replace(/['\"]/g,'');}}link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);message.success('文件下载成功！');// 更新下载次数\nif(shareInfo){setShareInfo(_objectSpread(_objectSpread({},shareInfo),{},{download_count:shareInfo.download_count+1}));}}catch(error){var _error$response5,_error$response5$data;message.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'下载失败');}finally{setDownloading(false);}};const formatFileSize=bytes=>{if(!bytes)return'0 B';const k=1024;const sizes=['B','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};const formatDate=dateString=>{if(!dateString)return null;return new Date(dateString).toLocaleString('zh-CN');};if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:'60vh'},children:/*#__PURE__*/_jsx(Spin,{size:\"large\",tip:\"\\u52A0\\u8F7D\\u4E2D...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:600,margin:'50px auto'},children:/*#__PURE__*/_jsx(Alert,{message:\"\\u8BBF\\u95EE\\u5931\\u8D25\",description:error,type:\"error\",showIcon:true,action:/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:()=>navigate('/login'),children:\"\\u8FD4\\u56DE\\u767B\\u5F55\"})})});}if(passwordRequired&&!shareInfo){return/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:400,margin:'100px auto'},children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(Title,{level:3,style:{textAlign:'center',marginBottom:30},children:[/*#__PURE__*/_jsx(LockOutlined,{}),\" \\u8BBF\\u95EE\\u53D7\\u4FDD\\u62A4\\u7684\\u5206\\u4EAB\"]}),/*#__PURE__*/_jsxs(Space,{direction:\"vertical\",style:{width:'100%'},children:[/*#__PURE__*/_jsx(Input.Password,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u8BBF\\u95EE\\u5BC6\\u7801\",value:password,onChange:e=>setPassword(e.target.value),onPressEnter:handlePasswordSubmit}),/*#__PURE__*/_jsx(Button,{type:\"primary\",block:true,onClick:handlePasswordSubmit,loading:loading,children:\"\\u89E3\\u9501\\u8BBF\\u95EE\"})]})]})});}return/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:800,margin:'50px auto',padding:'0 20px'},children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:30},children:[/*#__PURE__*/_jsx(FileOutlined,{style:{fontSize:64,color:'#1890ff',marginBottom:16}}),/*#__PURE__*/_jsx(Title,{level:2,children:shareInfo.file_name})]}),/*#__PURE__*/_jsxs(Descriptions,{column:1,bordered:true,style:{marginBottom:30},children:[/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u6587\\u4EF6\\u5927\\u5C0F\",children:/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:formatFileSize(shareInfo.file_size)})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u4E0B\\u8F7D\\u6B21\\u6570\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(NumberOutlined,{}),/*#__PURE__*/_jsxs(Text,{strong:true,children:[shareInfo.download_count,\" / \",shareInfo.max_downloads||'无限制']})]})}),shareInfo.expire_at&&/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u8FC7\\u671F\\u65F6\\u95F4\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(ClockCircleOutlined,{}),/*#__PURE__*/_jsx(Text,{type:new Date(shareInfo.expire_at)<new Date()?'danger':'success',children:formatDate(shareInfo.expire_at)})]})}),shareInfo.password_protected&&/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u8BBF\\u95EE\\u4FDD\\u62A4\",children:/*#__PURE__*/_jsxs(Tag,{color:\"orange\",children:[/*#__PURE__*/_jsx(LockOutlined,{}),\" \\u5BC6\\u7801\\u4FDD\\u62A4\"]})}),/*#__PURE__*/_jsx(Descriptions.Item,{label:\"\\u5206\\u4EAB\\u65F6\\u95F4\",children:formatDate(shareInfo.created_at)})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",size:\"large\",icon:/*#__PURE__*/_jsx(DownloadOutlined,{}),onClick:handleDownload,loading:downloading,disabled:shareInfo.max_downloads>0&&shareInfo.download_count>=shareInfo.max_downloads,children:shareInfo.max_downloads>0&&shareInfo.download_count>=shareInfo.max_downloads?'下载次数已用完':'下载文件'})}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:20},children:/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:()=>navigate('/login'),children:\"\\u8FD4\\u56DE\\u767B\\u5F55\\u9875\\u9762\"})})]})});};export default ShareView;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Card","Button","Input","Spin","message","Descriptions","Tag","Space","Typography","Alert","DownloadOutlined","LockOutlined","FileOutlined","ClockCircleOutlined","NumberOutlined","api","jsx","_jsx","jsxs","_jsxs","Title","Text","ShareView","shareCode","navigate","loading","setLoading","downloading","setDownloading","shareInfo","setShareInfo","password","setPassword","passwordRequired","setPasswordRequired","error","setError","fetchShareInfo","pwd","arguments","length","undefined","response","get","concat","params","data","_error$response","_error$response2","_error$response2$data","_error$response3","status","_error$response4","_error$response4$data","handlePasswordSubmit","trim","handleDownload","post","responseType","blob","Blob","url","window","URL","createObjectURL","link","document","createElement","href","contentDisposition","headers","filename","file_name","filenameMatch","match","replace","download","body","appendChild","click","removeChild","revokeObjectURL","success","_objectSpread","download_count","_error$response5","_error$response5$data","formatFileSize","bytes","k","sizes","i","Math","floor","log","parseFloat","pow","toFixed","formatDate","dateString","Date","toLocaleString","style","display","justifyContent","alignItems","minHeight","children","size","tip","maxWidth","margin","description","type","showIcon","action","onClick","level","textAlign","marginBottom","direction","width","Password","placeholder","value","onChange","e","target","onPressEnter","block","padding","fontSize","color","column","bordered","Item","label","file_size","strong","max_downloads","expire_at","password_protected","created_at","icon","disabled","marginTop"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/ShareView.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { \n  Card, \n  Button, \n  Input, \n  Spin, \n  message, \n  Descriptions, \n  Tag,\n  Space,\n  Typography,\n  Alert\n} from 'antd';\nimport { \n  DownloadOutlined, \n  LockOutlined, \n  FileOutlined,\n  ClockCircleOutlined,\n  NumberOutlined\n} from '@ant-design/icons';\nimport api from '../services/api';\n\nconst { Title, Text } = Typography;\n\nconst ShareView = () => {\n  const { shareCode } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [downloading, setDownloading] = useState(false);\n  const [shareInfo, setShareInfo] = useState(null);\n  const [password, setPassword] = useState('');\n  const [passwordRequired, setPasswordRequired] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    fetchShareInfo();\n  }, [shareCode]);\n\n  const fetchShareInfo = async (pwd = '') => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      const response = await api.get(`/api/files/share/${shareCode}/`, {\n        params: pwd ? { password: pwd } : {}\n      });\n      \n      setShareInfo(response.data);\n      setPasswordRequired(false);\n    } catch (error) {\n      if (error.response?.status === 403 && error.response?.data?.error === '需要密码') {\n        setPasswordRequired(true);\n      } else if (error.response?.status === 404) {\n        setError('分享链接不存在或已过期');\n      } else {\n        setError(error.response?.data?.error || '获取分享信息失败');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePasswordSubmit = () => {\n    if (!password.trim()) {\n      message.error('请输入密码');\n      return;\n    }\n    fetchShareInfo(password);\n  };\n\n  const handleDownload = async () => {\n    try {\n      setDownloading(true);\n      \n      const response = await api.post(`/api/files/share/${shareCode}/download/`, \n        passwordRequired ? { password } : {},\n        {\n          responseType: 'blob'\n        }\n      );\n\n      // 创建下载链接\n      const blob = new Blob([response.data]);\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      \n      // 从响应头获取文件名\n      const contentDisposition = response.headers['content-disposition'];\n      let filename = shareInfo?.file_name || 'download';\n      if (contentDisposition) {\n        const filenameMatch = contentDisposition.match(/filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/);\n        if (filenameMatch && filenameMatch[1]) {\n          filename = filenameMatch[1].replace(/['\"]/g, '');\n        }\n      }\n      \n      link.download = filename;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n\n      message.success('文件下载成功！');\n      \n      // 更新下载次数\n      if (shareInfo) {\n        setShareInfo({\n          ...shareInfo,\n          download_count: shareInfo.download_count + 1\n        });\n      }\n    } catch (error) {\n      message.error(error.response?.data?.error || '下载失败');\n    } finally {\n      setDownloading(false);\n    }\n  };\n\n  const formatFileSize = (bytes) => {\n    if (!bytes) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (dateString) => {\n    if (!dateString) return null;\n    return new Date(dateString).toLocaleString('zh-CN');\n  };\n\n  if (loading) {\n    return (\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'center', \n        alignItems: 'center', \n        minHeight: '60vh' \n      }}>\n        <Spin size=\"large\" tip=\"加载中...\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{ maxWidth: 600, margin: '50px auto' }}>\n        <Alert\n          message=\"访问失败\"\n          description={error}\n          type=\"error\"\n          showIcon\n          action={\n            <Button type=\"primary\" onClick={() => navigate('/login')}>\n              返回登录\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  if (passwordRequired && !shareInfo) {\n    return (\n      <div style={{ maxWidth: 400, margin: '100px auto' }}>\n        <Card>\n          <Title level={3} style={{ textAlign: 'center', marginBottom: 30 }}>\n            <LockOutlined /> 访问受保护的分享\n          </Title>\n          <Space direction=\"vertical\" style={{ width: '100%' }}>\n            <Input.Password\n              placeholder=\"请输入访问密码\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              onPressEnter={handlePasswordSubmit}\n            />\n            <Button \n              type=\"primary\" \n              block \n              onClick={handlePasswordSubmit}\n              loading={loading}\n            >\n              解锁访问\n            </Button>\n          </Space>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ maxWidth: 800, margin: '50px auto', padding: '0 20px' }}>\n      <Card>\n        <div style={{ textAlign: 'center', marginBottom: 30 }}>\n          <FileOutlined style={{ fontSize: 64, color: '#1890ff', marginBottom: 16 }} />\n          <Title level={2}>{shareInfo.file_name}</Title>\n        </div>\n\n        <Descriptions column={1} bordered style={{ marginBottom: 30 }}>\n          <Descriptions.Item label=\"文件大小\">\n            <Tag color=\"blue\">{formatFileSize(shareInfo.file_size)}</Tag>\n          </Descriptions.Item>\n          \n          <Descriptions.Item label=\"下载次数\">\n            <Space>\n              <NumberOutlined />\n              <Text strong>\n                {shareInfo.download_count} / {shareInfo.max_downloads || '无限制'}\n              </Text>\n            </Space>\n          </Descriptions.Item>\n\n          {shareInfo.expire_at && (\n            <Descriptions.Item label=\"过期时间\">\n              <Space>\n                <ClockCircleOutlined />\n                <Text type={new Date(shareInfo.expire_at) < new Date() ? 'danger' : 'success'}>\n                  {formatDate(shareInfo.expire_at)}\n                </Text>\n              </Space>\n            </Descriptions.Item>\n          )}\n\n          {shareInfo.password_protected && (\n            <Descriptions.Item label=\"访问保护\">\n              <Tag color=\"orange\"><LockOutlined /> 密码保护</Tag>\n            </Descriptions.Item>\n          )}\n\n          <Descriptions.Item label=\"分享时间\">\n            {formatDate(shareInfo.created_at)}\n          </Descriptions.Item>\n        </Descriptions>\n\n        <div style={{ textAlign: 'center' }}>\n          <Button\n            type=\"primary\"\n            size=\"large\"\n            icon={<DownloadOutlined />}\n            onClick={handleDownload}\n            loading={downloading}\n            disabled={\n              shareInfo.max_downloads > 0 && \n              shareInfo.download_count >= shareInfo.max_downloads\n            }\n          >\n            {shareInfo.max_downloads > 0 && \n             shareInfo.download_count >= shareInfo.max_downloads\n              ? '下载次数已用完'\n              : '下载文件'\n            }\n          </Button>\n        </div>\n\n        <div style={{ textAlign: 'center', marginTop: 20 }}>\n          <Button type=\"link\" onClick={() => navigate('/login')}>\n            返回登录页面\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n};\n\nexport default ShareView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}