{"ast":null,"code":"import _objectSpread from\"D:/cloud-storage-system/cloud-storage-system/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Card,Button,Table,Modal,Form,Input,Upload,message,Space,Popconfirm,Tag,Typography,Row,Col,Tooltip}from'antd';import{UploadOutlined,FolderAddOutlined,DeleteOutlined,ShareAltOutlined,FileOutlined,FolderOutlined,ArrowLeftOutlined,CloudDownloadOutlined}from'@ant-design/icons';import{useParams,useNavigate}from'react-router-dom';import{useQuery,useMutation,useQueryClient}from'react-query';import api from'../services/api';import ShareModal from'../components/ShareModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Title,Text}=Typography;const{Dragger}=Upload;const Files=()=>{const{folderId}=useParams();const navigate=useNavigate();const queryClient=useQueryClient();const[uploadModalVisible,setUploadModalVisible]=useState(false);const[folderModalVisible,setFolderModalVisible]=useState(false);const[folderForm]=Form.useForm();const{data:folders=[]}=useQuery(['folders',folderId],()=>api.get('/api/files/folders/',{params:folderId?{parent_id:folderId}:{}}).then(res=>res.data));const{data:filesData,isLoading}=useQuery(['files',folderId],()=>api.get('/api/files/',{params:folderId?{folder_id:folderId}:{}}).then(res=>res.data),{refetchOnWindowFocus:false});const uploadMutation=useMutation(fileObj=>{const data=new FormData();data.append('file',fileObj);if(folderId){data.append('folder_id',folderId);}// 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\nreturn api.post('/api/files/upload/',data,{headers:{'Content-Type':undefined}});},{onSuccess:()=>{message.success('文件上传成功！');setUploadModalVisible(false);queryClient.invalidateQueries('files');queryClient.invalidateQueries('storage-info');},onError:error=>{var _error$response,_error$response$data;const errorMsg=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'上传失败';message.error(errorMsg);}});const createFolderMutation=useMutation(data=>api.post('/api/files/folders/create/',_objectSpread(_objectSpread({},data),{},{parent_id:folderId})),{onSuccess:()=>{message.success('文件夹创建成功！');setFolderModalVisible(false);folderForm.resetFields();queryClient.invalidateQueries('folders');},onError:error=>{var _error$response2,_error$response2$data;const errorMsg=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'创建失败';message.error(errorMsg);}});const deleteFileMutation=useMutation(fileId=>api.delete(\"/api/files/\".concat(fileId,\"/delete/\")),{onSuccess:()=>{message.success('文件删除成功！');queryClient.invalidateQueries('files');queryClient.invalidateQueries('storage-info');},onError:error=>{var _error$response3,_error$response3$data;const errorMsg=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'删除失败';message.error(errorMsg);}});const downloadFile=async file=>{try{message.loading('正在准备下载...',0);// 方式1: 获取下载URL\nconst response=await api.get(\"/api/files/\".concat(file.id,\"/download-url/\"));const{download_url,filename,method}=response.data;if(method==='direct'){// 直接下载API\nmessage.destroy();message.loading('正在下载文件...',0);const downloadResponse=await api.get(\"/api/files/\".concat(file.id,\"/download/\"),{responseType:'blob'});// 创建Blob URL\nconst blob=new Blob([downloadResponse.data],{type:file.mime_type});const url=window.URL.createObjectURL(blob);// 创建隐藏的a标签进行下载\nconst link=document.createElement('a');link.href=url;link.download=filename;link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);// 清理URL对象\nwindow.URL.revokeObjectURL(url);message.destroy();message.success('文件下载完成！');}else{// Swift临时URL下载\n// 创建隐藏的a标签进行下载\nconst link=document.createElement('a');link.href=download_url;link.download=filename;link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);message.destroy();message.success('文件下载开始！');}}catch(error){message.destroy();// 如果URL下载失败，尝试直接流式下载\ntry{message.loading('正在下载文件...',0);const response=await api.get(\"/api/files/\".concat(file.id,\"/download/\"),{responseType:'blob'});// 创建Blob URL\nconst blob=new Blob([response.data],{type:file.mime_type});const url=window.URL.createObjectURL(blob);// 创建隐藏的a标签进行下载\nconst link=document.createElement('a');link.href=url;link.download=file.original_name;link.style.display='none';document.body.appendChild(link);link.click();document.body.removeChild(link);// 清理URL对象\nwindow.URL.revokeObjectURL(url);message.destroy();message.success('文件下载完成！');}catch(streamError){var _error$response4,_error$response4$data;message.destroy();const errorMsg=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.error)||streamError.message||'下载失败';message.error(\"\\u4E0B\\u8F7D\\u5931\\u8D25: \".concat(errorMsg));}}};const deleteFolderMutation=useMutation(folderId=>api.delete(\"/api/files/folders/\".concat(folderId,\"/delete/\")),{onSuccess:()=>{message.success('文件夹删除成功！');queryClient.invalidateQueries('folders');},onError:error=>{var _error$response5,_error$response5$data;const errorMsg=((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.error)||'删除失败';message.error(errorMsg);}});const uploadProps={name:'file',multiple:false,customRequest:_ref=>{let{file,onSuccess,onError}=_ref;uploadMutation.mutate(file,{onSuccess:()=>onSuccess(),onError:error=>onError(error)});},showUploadList:false};const folderColumns=[{title:'名称',dataIndex:'name',key:'name',render:(text,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(FolderOutlined,{style:{color:'#fa709a',fontSize:'18px'}}),/*#__PURE__*/_jsx(Button,{type:\"link\",onClick:()=>navigate(\"/files/\".concat(record.id)),style:{padding:0,height:'auto'},children:text})]})},{title:'文件数量',dataIndex:'files_count',key:'files_count'},{title:'创建时间',dataIndex:'created_at',key:'created_at',render:text=>new Date(text).toLocaleString()},{title:'操作',key:'actions',render:(_,record)=>/*#__PURE__*/_jsx(Space,{children:/*#__PURE__*/_jsx(Popconfirm,{title:\"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u5417\\uFF1F\",onConfirm:()=>deleteFolderMutation.mutate(record.id),okText:\"\\u786E\\u5B9A\",cancelText:\"\\u53D6\\u6D88\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),size:\"small\"})})})}];const fileColumns=[{title:'名称',dataIndex:'name',key:'name',render:(text,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(FileOutlined,{style:{color:getFileIconColor(record.file_extension),fontSize:'18px'}}),/*#__PURE__*/_jsx(Tooltip,{title:record.original_name,children:/*#__PURE__*/_jsx(Text,{ellipsis:true,style:{maxWidth:'200px'},children:text})})]})},{title:'大小',dataIndex:'size_display',key:'size_display'},{title:'类型',dataIndex:'file_type',key:'file_type',render:type=>/*#__PURE__*/_jsx(Tag,{color:\"blue\",children:type||'未知'})},{title:'上传时间',dataIndex:'created_at',key:'created_at',render:text=>new Date(text).toLocaleString()},{title:'操作',key:'actions',render:(_,record)=>/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Tooltip,{title:\"\\u4E0B\\u8F7D\\u6587\\u4EF6\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(CloudDownloadOutlined,{}),size:\"small\",onClick:()=>downloadFile(record)})}),/*#__PURE__*/_jsx(Tooltip,{title:\"\\u5206\\u4EAB\\u6587\\u4EF6\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",icon:/*#__PURE__*/_jsx(ShareAltOutlined,{}),size:\"small\",onClick:()=>handleShareFile(record.id)})}),/*#__PURE__*/_jsx(Popconfirm,{title:\"\\u786E\\u5B9A\\u5220\\u9664\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5417\\uFF1F\",onConfirm:()=>deleteFileMutation.mutate(record.id),okText:\"\\u786E\\u5B9A\",cancelText:\"\\u53D6\\u6D88\",children:/*#__PURE__*/_jsx(Tooltip,{title:\"\\u5220\\u9664\\u6587\\u4EF6\",children:/*#__PURE__*/_jsx(Button,{type:\"text\",danger:true,icon:/*#__PURE__*/_jsx(DeleteOutlined,{}),size:\"small\"})})})]})}];const getFileIconColor=extension=>{const colorMap={'.pdf':'#ff6b6b','.doc':'#4facfe','.xls':'#43e97b','.jpg':'#fa709a','.png':'#fee140','.mp4':'#30cfd0','.mp3':'#a8edea','.zip':'#ff9a9e'};return colorMap[extension]||'#667eea';};const[shareModalVisible,setShareModalVisible]=useState(false);const[selectedFileId,setSelectedFileId]=useState(null);const handleShareFile=fileId=>{setSelectedFileId(fileId);setShareModalVisible(true);};const handleShareModalOk=shareData=>{setShareModalVisible(false);setSelectedFileId(null);queryClient.invalidateQueries('my-shares');};const handleShareModalCancel=()=>{setShareModalVisible(false);setSelectedFileId(null);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:'24px',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(Space,{children:[folderId&&/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(ArrowLeftOutlined,{}),onClick:()=>navigate('/files'),children:\"\\u8FD4\\u56DE\\u4E0A\\u7EA7\"}),/*#__PURE__*/_jsx(Title,{level:2,style:{color:'#333',margin:0},children:\"\\u6211\\u7684\\u6587\\u4EF6\"})]}),/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",icon:/*#__PURE__*/_jsx(UploadOutlined,{}),onClick:()=>setUploadModalVisible(true),className:\"cel-button\",children:\"\\u4E0A\\u4F20\\u6587\\u4EF6\"}),/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(FolderAddOutlined,{}),onClick:()=>setFolderModalVisible(true),className:\"cel-button\",children:\"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\"})]})]}),/*#__PURE__*/_jsxs(Row,{gutter:[24,24],children:[/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{className:\"cel-card\",title:\"\\u6587\\u4EF6\\u5939\",children:/*#__PURE__*/_jsx(Table,{columns:folderColumns,dataSource:folders,rowKey:\"id\",pagination:false,size:\"small\"})})}),/*#__PURE__*/_jsx(Col,{span:24,children:/*#__PURE__*/_jsx(Card,{className:\"cel-card\",title:\"\\u6587\\u4EF6\",children:/*#__PURE__*/_jsx(Table,{columns:fileColumns,dataSource:(filesData===null||filesData===void 0?void 0:filesData.results)||filesData||[],rowKey:\"id\",loading:isLoading,pagination:{total:filesData===null||filesData===void 0?void 0:filesData.count,pageSize:20,showSizeChanger:false,showQuickJumper:true},size:\"small\"})})})]}),/*#__PURE__*/_jsx(Modal,{title:\"\\u4E0A\\u4F20\\u6587\\u4EF6\",open:uploadModalVisible,onCancel:()=>setUploadModalVisible(false),footer:null,width:600,children:/*#__PURE__*/_jsxs(Dragger,_objectSpread(_objectSpread({},uploadProps),{},{children:[/*#__PURE__*/_jsx(\"p\",{className:\"ant-upload-drag-icon\",children:/*#__PURE__*/_jsx(UploadOutlined,{style:{fontSize:'48px',color:'#667eea'}})}),/*#__PURE__*/_jsx(\"p\",{className:\"ant-upload-text\",children:\"\\u70B9\\u51FB\\u6216\\u62D6\\u62FD\\u6587\\u4EF6\\u5230\\u6B64\\u533A\\u57DF\\u4E0A\\u4F20\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ant-upload-hint\",children:\"\\u652F\\u6301\\u5355\\u4E2A\\u6587\\u4EF6\\u4E0A\\u4F20\\uFF0C\\u6587\\u4EF6\\u5927\\u5C0F\\u4E0D\\u80FD\\u8D85\\u8FC7\\u7CFB\\u7EDF\\u9650\\u5236\"})]}))}),/*#__PURE__*/_jsx(Modal,{title:\"\\u65B0\\u5EFA\\u6587\\u4EF6\\u5939\",open:folderModalVisible,onOk:()=>folderForm.submit(),onCancel:()=>setFolderModalVisible(false),confirmLoading:createFolderMutation.isLoading,children:/*#__PURE__*/_jsx(Form,{form:folderForm,layout:\"vertical\",onFinish:values=>createFolderMutation.mutate(values),children:/*#__PURE__*/_jsx(Form.Item,{name:\"name\",label:\"\\u6587\\u4EF6\\u5939\\u540D\\u79F0\",rules:[{required:true,message:'请输入文件夹名称'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"\\u8BF7\\u8F93\\u5165\\u6587\\u4EF6\\u5939\\u540D\\u79F0\"})})})}),/*#__PURE__*/_jsx(ShareModal,{visible:shareModalVisible,onCancel:handleShareModalCancel,onOk:handleShareModalOk,fileId:selectedFileId})]});};export default Files;","map":{"version":3,"names":["React","useState","Card","Button","Table","Modal","Form","Input","Upload","message","Space","Popconfirm","Tag","Typography","Row","Col","Tooltip","UploadOutlined","FolderAddOutlined","DeleteOutlined","ShareAltOutlined","FileOutlined","FolderOutlined","ArrowLeftOutlined","CloudDownloadOutlined","useParams","useNavigate","useQuery","useMutation","useQueryClient","api","ShareModal","jsx","_jsx","jsxs","_jsxs","Title","Text","Dragger","Files","folderId","navigate","queryClient","uploadModalVisible","setUploadModalVisible","folderModalVisible","setFolderModalVisible","folderForm","useForm","data","folders","get","params","parent_id","then","res","filesData","isLoading","folder_id","refetchOnWindowFocus","uploadMutation","fileObj","FormData","append","post","headers","undefined","onSuccess","success","invalidateQueries","onError","error","_error$response","_error$response$data","errorMsg","response","createFolderMutation","_objectSpread","resetFields","_error$response2","_error$response2$data","deleteFileMutation","fileId","delete","concat","_error$response3","_error$response3$data","downloadFile","file","loading","id","download_url","filename","method","destroy","downloadResponse","responseType","blob","Blob","type","mime_type","url","window","URL","createObjectURL","link","document","createElement","href","download","style","display","body","appendChild","click","removeChild","revokeObjectURL","original_name","streamError","_error$response4","_error$response4$data","deleteFolderMutation","_error$response5","_error$response5$data","uploadProps","name","multiple","customRequest","_ref","mutate","showUploadList","folderColumns","title","dataIndex","key","render","text","record","children","color","fontSize","onClick","padding","height","Date","toLocaleString","_","onConfirm","okText","cancelText","danger","icon","size","fileColumns","getFileIconColor","file_extension","ellipsis","maxWidth","handleShareFile","extension","colorMap","shareModalVisible","setShareModalVisible","selectedFileId","setSelectedFileId","handleShareModalOk","shareData","handleShareModalCancel","marginBottom","justifyContent","alignItems","level","margin","className","gutter","span","columns","dataSource","rowKey","pagination","results","total","count","pageSize","showSizeChanger","showQuickJumper","open","onCancel","footer","width","onOk","submit","confirmLoading","form","layout","onFinish","values","Item","label","rules","required","placeholder","visible"],"sources":["D:/cloud-storage-system/cloud-storage-system/frontend/src/pages/Files.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { \n  Card, \n  Button, \n  Table, \n  Modal, \n  Form, \n  Input, \n  Upload, \n  message,\n  Space,\n  Popconfirm,\n  Tag,\n  Typography,\n  Row,\n  Col,\n  Tooltip\n} from 'antd';\nimport { \n  UploadOutlined, \n  FolderAddOutlined, \n  DeleteOutlined,\n  ShareAltOutlined,\n  FileOutlined,\n  FolderOutlined,\n  ArrowLeftOutlined,\n  CloudDownloadOutlined\n} from '@ant-design/icons';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport api from '../services/api';\nimport ShareModal from '../components/ShareModal';\n\nconst { Title, Text } = Typography;\nconst { Dragger } = Upload;\n\nconst Files = () => {\n  const { folderId } = useParams();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n  const [uploadModalVisible, setUploadModalVisible] = useState(false);\n  const [folderModalVisible, setFolderModalVisible] = useState(false);\n  const [folderForm] = Form.useForm();\n\n  const { data: folders = [] } = useQuery(\n    ['folders', folderId],\n    () => api.get('/api/files/folders/', { \n      params: folderId ? { parent_id: folderId } : {} \n    }).then(res => res.data)\n  );\n\n  const { data: filesData, isLoading } = useQuery(\n    ['files', folderId],\n    () => api.get('/api/files/', { \n      params: folderId ? { folder_id: folderId } : {} \n    }).then(res => res.data),\n    { refetchOnWindowFocus: false }\n  );\n\n  const uploadMutation = useMutation(\n    (fileObj) => {\n      const data = new FormData();\n      data.append('file', fileObj);\n      if (folderId) {\n        data.append('folder_id', folderId);\n      }\n      // 为FormData请求移除Content-Type，让浏览器自动设置multipart/form-data\n      return api.post('/api/files/upload/', data, {\n        headers: {\n          'Content-Type': undefined,\n        },\n      });\n    },\n    {\n      onSuccess: () => {\n        message.success('文件上传成功！');\n        setUploadModalVisible(false);\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '上传失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const createFolderMutation = useMutation(\n    (data) => api.post('/api/files/folders/create/', {\n      ...data,\n      parent_id: folderId\n    }),\n    {\n      onSuccess: () => {\n        message.success('文件夹创建成功！');\n        setFolderModalVisible(false);\n        folderForm.resetFields();\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '创建失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const deleteFileMutation = useMutation(\n    (fileId) => api.delete(`/api/files/${fileId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件删除成功！');\n        queryClient.invalidateQueries('files');\n        queryClient.invalidateQueries('storage-info');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const downloadFile = async (file) => {\n    try {\n      message.loading('正在准备下载...', 0);\n      \n      // 方式1: 获取下载URL\n      const response = await api.get(`/api/files/${file.id}/download-url/`);\n      const { download_url, filename, method } = response.data;\n      \n      if (method === 'direct') {\n        // 直接下载API\n        message.destroy();\n        message.loading('正在下载文件...', 0);\n        \n        const downloadResponse = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([downloadResponse.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } else {\n        // Swift临时URL下载\n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = download_url;\n        link.download = filename;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        message.destroy();\n        message.success('文件下载开始！');\n      }\n    } catch (error) {\n      message.destroy();\n      \n      // 如果URL下载失败，尝试直接流式下载\n      try {\n        message.loading('正在下载文件...', 0);\n        \n        const response = await api.get(`/api/files/${file.id}/download/`, {\n          responseType: 'blob'\n        });\n        \n        // 创建Blob URL\n        const blob = new Blob([response.data], { type: file.mime_type });\n        const url = window.URL.createObjectURL(blob);\n        \n        // 创建隐藏的a标签进行下载\n        const link = document.createElement('a');\n        link.href = url;\n        link.download = file.original_name;\n        link.style.display = 'none';\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        \n        // 清理URL对象\n        window.URL.revokeObjectURL(url);\n        \n        message.destroy();\n        message.success('文件下载完成！');\n      } catch (streamError) {\n        message.destroy();\n        const errorMsg = error.response?.data?.error || streamError.message || '下载失败';\n        message.error(`下载失败: ${errorMsg}`);\n      }\n    }\n  };\n\n  const deleteFolderMutation = useMutation(\n    (folderId) => api.delete(`/api/files/folders/${folderId}/delete/`),\n    {\n      onSuccess: () => {\n        message.success('文件夹删除成功！');\n        queryClient.invalidateQueries('folders');\n      },\n      onError: (error) => {\n        const errorMsg = error.response?.data?.error || '删除失败';\n        message.error(errorMsg);\n      }\n    }\n  );\n\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    customRequest: ({ file, onSuccess, onError }) => {\n      uploadMutation.mutate(file, {\n        onSuccess: () => onSuccess(),\n        onError: (error) => onError(error)\n      });\n    },\n    showUploadList: false,\n  };\n\n  const folderColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FolderOutlined style={{ color: '#fa709a', fontSize: '18px' }} />\n          <Button \n            type=\"link\" \n            onClick={() => navigate(`/files/${record.id}`)}\n            style={{ padding: 0, height: 'auto' }}\n          >\n            {text}\n          </Button>\n        </Space>\n      ),\n    },\n    {\n      title: '文件数量',\n      dataIndex: 'files_count',\n      key: 'files_count',\n    },\n    {\n      title: '创建时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Popconfirm\n            title=\"确定删除这个文件夹吗？\"\n            onConfirm={() => deleteFolderMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Button \n              type=\"text\" \n              danger \n              icon={<DeleteOutlined />}\n              size=\"small\"\n            />\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const fileColumns = [\n    {\n      title: '名称',\n      dataIndex: 'name',\n      key: 'name',\n      render: (text, record) => (\n        <Space>\n          <FileOutlined style={{ \n            color: getFileIconColor(record.file_extension),\n            fontSize: '18px' \n          }} />\n          <Tooltip title={record.original_name}>\n            <Text ellipsis style={{ maxWidth: '200px' }}>{text}</Text>\n          </Tooltip>\n        </Space>\n      ),\n    },\n    {\n      title: '大小',\n      dataIndex: 'size_display',\n      key: 'size_display',\n    },\n    {\n      title: '类型',\n      dataIndex: 'file_type',\n      key: 'file_type',\n      render: (type) => (\n        <Tag color=\"blue\">{type || '未知'}</Tag>\n      ),\n    },\n    {\n      title: '上传时间',\n      dataIndex: 'created_at',\n      key: 'created_at',\n      render: (text) => new Date(text).toLocaleString(),\n    },\n    {\n      title: '操作',\n      key: 'actions',\n      render: (_, record) => (\n        <Space>\n          <Tooltip title=\"下载文件\">\n            <Button \n              type=\"text\" \n              icon={<CloudDownloadOutlined />}\n              size=\"small\"\n              onClick={() => downloadFile(record)}\n            />\n          </Tooltip>\n          <Tooltip title=\"分享文件\">\n            <Button \n              type=\"text\" \n              icon={<ShareAltOutlined />}\n              size=\"small\"\n              onClick={() => handleShareFile(record.id)}\n            />\n          </Tooltip>\n          <Popconfirm\n            title=\"确定删除这个文件吗？\"\n            onConfirm={() => deleteFileMutation.mutate(record.id)}\n            okText=\"确定\"\n            cancelText=\"取消\"\n          >\n            <Tooltip title=\"删除文件\">\n              <Button \n                type=\"text\" \n                danger \n                icon={<DeleteOutlined />}\n                size=\"small\"\n              />\n            </Tooltip>\n          </Popconfirm>\n        </Space>\n      ),\n    },\n  ];\n\n  const getFileIconColor = (extension) => {\n    const colorMap = {\n      '.pdf': '#ff6b6b',\n      '.doc': '#4facfe',\n      '.xls': '#43e97b',\n      '.jpg': '#fa709a',\n      '.png': '#fee140',\n      '.mp4': '#30cfd0',\n      '.mp3': '#a8edea',\n      '.zip': '#ff9a9e',\n    };\n    return colorMap[extension] || '#667eea';\n  };\n\n  const [shareModalVisible, setShareModalVisible] = useState(false);\n  const [selectedFileId, setSelectedFileId] = useState(null);\n\n  const handleShareFile = (fileId) => {\n    setSelectedFileId(fileId);\n    setShareModalVisible(true);\n  };\n\n  const handleShareModalOk = (shareData) => {\n    setShareModalVisible(false);\n    setSelectedFileId(null);\n    queryClient.invalidateQueries('my-shares');\n  };\n\n  const handleShareModalCancel = () => {\n    setShareModalVisible(false);\n    setSelectedFileId(null);\n  };\n\n  return (\n    <div>\n      <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Space>\n          {folderId && (\n            <Button \n              icon={<ArrowLeftOutlined />} \n              onClick={() => navigate('/files')}\n            >\n              返回上级\n            </Button>\n          )}\n          <Title level={2} style={{ color: '#333', margin: 0 }}>\n            我的文件\n          </Title>\n        </Space>\n        \n        <Space>\n          <Button \n            type=\"primary\" \n            icon={<UploadOutlined />}\n            onClick={() => setUploadModalVisible(true)}\n            className=\"cel-button\"\n          >\n            上传文件\n          </Button>\n          <Button \n            icon={<FolderAddOutlined />}\n            onClick={() => setFolderModalVisible(true)}\n            className=\"cel-button\"\n          >\n            新建文件夹\n          </Button>\n        </Space>\n      </div>\n\n      <Row gutter={[24, 24]}>\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件夹\">\n            <Table\n              columns={folderColumns}\n              dataSource={folders}\n              rowKey=\"id\"\n              pagination={false}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n\n        <Col span={24}>\n          <Card className=\"cel-card\" title=\"文件\">\n            <Table\n              columns={fileColumns}\n              dataSource={filesData?.results || filesData || []}\n              rowKey=\"id\"\n              loading={isLoading}\n              pagination={{\n                total: filesData?.count,\n                pageSize: 20,\n                showSizeChanger: false,\n                showQuickJumper: true,\n              }}\n              size=\"small\"\n            />\n          </Card>\n        </Col>\n      </Row>\n\n      {/* 上传文件模态框 */}\n      <Modal\n        title=\"上传文件\"\n        open={uploadModalVisible}\n        onCancel={() => setUploadModalVisible(false)}\n        footer={null}\n        width={600}\n      >\n        <Dragger {...uploadProps}>\n          <p className=\"ant-upload-drag-icon\">\n            <UploadOutlined style={{ fontSize: '48px', color: '#667eea' }} />\n          </p>\n          <p className=\"ant-upload-text\">点击或拖拽文件到此区域上传</p>\n          <p className=\"ant-upload-hint\">\n            支持单个文件上传，文件大小不能超过系统限制\n          </p>\n        </Dragger>\n      </Modal>\n\n      {/* 创建文件夹模态框 */}\n      <Modal\n        title=\"新建文件夹\"\n        open={folderModalVisible}\n        onOk={() => folderForm.submit()}\n        onCancel={() => setFolderModalVisible(false)}\n        confirmLoading={createFolderMutation.isLoading}\n      >\n        <Form\n          form={folderForm}\n          layout=\"vertical\"\n          onFinish={(values) => createFolderMutation.mutate(values)}\n        >\n          <Form.Item\n            name=\"name\"\n            label=\"文件夹名称\"\n            rules={[{ required: true, message: '请输入文件夹名称' }]}\n          >\n            <Input placeholder=\"请输入文件夹名称\" />\n          </Form.Item>\n        </Form>\n      </Modal>\n\n      {/* 分享模态框 */}\n      <ShareModal\n        visible={shareModalVisible}\n        onCancel={handleShareModalCancel}\n        onOk={handleShareModalOk}\n        fileId={selectedFileId}\n      />\n    </div>\n  );\n};\n\nexport default Files;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}